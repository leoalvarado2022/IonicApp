(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{K4qh:function(l,n,u){"use strict";u.r(n);var e=u("8Y7J"),r=u("mrSG"),t=u("niFY"),o=u("sTnX"),i=u("ZZ/e"),a=u("Sso+"),s=u("biaL"),c=u("Gvy4"),b=u("ocFP"),d=function(l){return l["POR APROBAR"]="por aprobar",l.APROBADO="aprobado",l.RECHAZADO="rechazado",l["APRUEBA RECHAZO"]="apruebarechazo",l}({});class p{constructor(l,n,u,e,t,o,i,a){this.syncService=l,this.route=n,this.loaderService=u,this.actionSheetController=e,this.quadrilleService=t,this.userService=o,this.httpService=i,this.storeService=a,this.filteredWorkers=[],this.selectedWorkers=[],this.workers=[],this.quadrilles=[],this.buttons=[],this.userData=null,this.reload=l=>{const n=this.route.snapshot.paramMap.get("id");this.loadWorkers(n),l.target.complete()},this.markWorker=l=>{if(this.selectedWorkers.includes(l)){const n=this.selectedWorkers.indexOf(l);this.selectedWorkers.splice(n,1)}else this.selectedWorkers.length>0&&(this.selectedWorkers=this.selectedWorkers.filter(n=>n.quadrilleStatus===l.quadrilleStatus)),this.selectedWorkers.push(l)},this.selectQuadrille=()=>r.__awaiter(this,void 0,void 0,(function*(){const l=yield this.actionSheetController.create({header:"Cuadrillas",buttons:[...this.buttons,{text:"Cancelar",icon:"close",role:"cancel",handler:()=>{this.selectedWorkers=[]}}]});yield l.present()})),this.acceptWorkers=()=>{this.transferWorkers(this.quadrille.id,d.APROBADO)},this.rejectWorkers=()=>{this.transferWorkers(this.quadrille.id,d.RECHAZADO)},this.acceptRejectWorkers=()=>{this.transferWorkers(this.quadrille.id,d["APRUEBA RECHAZO"])},this.loadWorkers=l=>{this.loaderService.startLoader();const n=this.storeService.getQuadrilles(),u=this.storeService.getWorkers();if(n&&u){this.quadrilles=[...n],this.quadrille=n.find(n=>n.id===+l);const e=u.filter(l=>l.quadrille===this.quadrille.id||l.quadrilleToApprove===this.quadrille.id);this.workers=[...e],this.filteredWorkers=[...e],this.buildButtons()}this.loaderService.stopLoader()},this.buildButtons=()=>{this.buttons=this.quadrilles.filter(l=>l!==this.quadrille).map(l=>({text:l.name,icon:"people",handler:()=>{this.transferWorkers(l.id,d["POR APROBAR"])}}))},this.transferWorkers=(l,n)=>{const u={quadrille:l,workers:this.selectedWorkers,status:n};this.loaderService.startLoader(),this.quadrilleService.transferWorkers(u).subscribe(l=>{this.loaderService.stopLoader(),this.selectedWorkers=[],this.reSync()},l=>{this.loaderService.stopLoader(),this.httpService.errorHandler(l)})},this.reSync=()=>{this.loaderService.startLoader(),this.route.snapshot.paramMap.get("id"),this.syncData(),this.loaderService.stopLoader()},this.syncData=()=>{const l=this.userData.username,n=this.storeService.getActiveConnection();this.syncService.syncData(l,n.superuser?1:0).subscribe(l=>{this.storeService.setSyncedData(l.data)},l=>r.__awaiter(this,void 0,void 0,(function*(){this.httpService.errorHandler(l)})))}}ngOnInit(){const l=this.route.snapshot.paramMap.get("id");this.store$=this.storeService.stateChanged.subscribe(n=>{this.userData=this.storeService.getUser(),this.loadWorkers(l)})}ngOnDestroy(){this.store$.unsubscribe()}}class h{}var f=u("FhNQ"),g=u("pMnS"),k=u("oBZk"),m=u("SVse"),v=u("4Gtl");class C{transform(l){return Object(v.c)(l)}}var B=u("KcSc"),L=u("X2tk"),S=u("iInd"),W=e.Ab({encapsulation:0,styles:[["ion-menu-button[_ngcontent-%COMP%]{--color:white}ion-title[_ngcontent-%COMP%]{color:#fff}.label-padding[_ngcontent-%COMP%]{padding-top:8px;font-size:18px}.quadrille-badge[_ngcontent-%COMP%]{--padding-top:5px;font-size:1em}.workerSelected[_ngcontent-%COMP%]{--background:var(--ion-color-medium);--color:var(--ion-color-light)}"]],data:{}});function x(l){return e.Xb(0,[(l()(),e.Cb(0,0,null,null,2,"ion-badge",[["color","warning"]],null,null,null,k.Y,k.d)),e.Bb(1,49152,null,0,i.k,[e.j,e.p,e.F],{color:[0,"color"]},null),(l()(),e.Vb(-1,0,[" Traspasando "]))],(function(l,n){l(n,1,0,"warning")}),null)}function q(l){return e.Xb(0,[(l()(),e.Cb(0,0,null,null,2,"ion-badge",[["color","warning"]],null,null,null,k.Y,k.d)),e.Bb(1,49152,null,0,i.k,[e.j,e.p,e.F],{color:[0,"color"]},null),(l()(),e.Vb(-1,0,[" Por Aprobar "]))],(function(l,n){l(n,1,0,"warning")}),null)}function F(l){return e.Xb(0,[(l()(),e.Cb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.rb(16777216,null,null,1,null,x)),e.Bb(2,16384,null,0,m.l,[e.X,e.T],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(16777216,null,null,1,null,q)),e.Bb(4,16384,null,0,m.l,[e.X,e.T],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(0,null,null,0))],(function(l,n){var u=n.component;l(n,2,0,"POR APROBAR"===n.parent.context.$implicit.quadrilleStatus&&n.parent.context.$implicit.quadrille===u.quadrille.id),l(n,4,0,"POR APROBAR"===n.parent.context.$implicit.quadrilleStatus&&n.parent.context.$implicit.quadrille!==u.quadrille.id)}),null)}function j(l){return e.Xb(0,[(l()(),e.Cb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.Cb(1,0,null,null,3,"ion-badge",[["color","danger"]],null,null,null,k.Y,k.d)),e.Bb(2,49152,null,0,i.k,[e.j,e.p,e.F],{color:[0,"color"]},null),(l()(),e.Vb(3,0,["",""])),e.Rb(4,1)],(function(l,n){l(n,2,0,"danger")}),(function(l,n){var u=e.Wb(n,3,0,l(n,4,0,e.Nb(n.parent.parent.parent.parent,1),n.parent.context.$implicit.quadrilleStatus));l(n,3,0,u)}))}function T(l){return e.Xb(0,[(l()(),e.Cb(0,0,null,null,19,"ion-item",[],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.markWorker(l.context.$implicit)&&e),e}),k.ub,k.w)),e.Sb(512,null,m.v,m.w,[e.x,e.y,e.p,e.L]),e.Bb(2,278528,null,0,m.j,[m.v],{ngClass:[0,"ngClass"]},null),e.Qb(3,{workerSelected:0}),e.Bb(4,49152,null,0,i.I,[e.j,e.p,e.F],null,null),(l()(),e.Cb(5,0,null,0,1,"ion-icon",[["name","contact"],["slot","start"]],null,null,null,k.ob,k.t)),e.Bb(6,49152,null,0,i.D,[e.j,e.p,e.F],{name:[0,"name"]},null),(l()(),e.Cb(7,0,null,0,12,"ion-label",[],null,null,null,k.vb,k.A)),e.Bb(8,49152,null,0,i.O,[e.j,e.p,e.F],null,null),(l()(),e.Cb(9,0,null,0,1,"h3",[["class","label-padding"]],null,null,null,null,null)),(l()(),e.Vb(10,null,["",""])),(l()(),e.Cb(11,0,null,0,8,"div",[["class","label-padding"]],null,null,null,null,null)),(l()(),e.Cb(12,0,null,null,2,"div",[["class","ion-text-left"]],null,null,null,null,null)),(l()(),e.Vb(13,null,[" "," "])),e.Rb(14,1),(l()(),e.Cb(15,0,null,null,4,"div",[["class","ion-text-right"]],null,null,null,null,null)),(l()(),e.rb(16777216,null,null,1,null,F)),e.Bb(17,16384,null,0,m.l,[e.X,e.T],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(16777216,null,null,1,null,j)),e.Bb(19,16384,null,0,m.l,[e.X,e.T],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=l(n,3,0,n.component.selectedWorkers.includes(n.context.$implicit));l(n,2,0,u),l(n,6,0,"contact"),l(n,17,0,n.context.$implicit.quadrilleToApprove>0),l(n,19,0,0===n.context.$implicit.quadrilleToApprove)}),(function(l,n){l(n,10,0,n.context.$implicit.name);var u=e.Wb(n,13,0,l(n,14,0,e.Nb(n.parent.parent.parent,0),n.context.$implicit.identifier));l(n,13,0,u)}))}function A(l){return e.Xb(0,[(l()(),e.Cb(0,0,null,null,9,null,null,null,null,null,null,null)),(l()(),e.Cb(1,0,null,null,8,"ion-list",[["lines","none"]],null,null,null,k.xb,k.B)),e.Bb(2,49152,null,0,i.P,[e.j,e.p,e.F],{lines:[0,"lines"]},null),(l()(),e.Cb(3,0,null,0,6,"ion-virtual-scroll",[],null,null,null,k.Pb,k.U)),e.Bb(4,835584,null,3,i.Eb,[e.F,e.x,e.p],{items:[0,"items"]},null),e.Tb(335544320,1,{itmTmp:0}),e.Tb(335544320,2,{hdrTmp:0}),e.Tb(335544320,3,{ftrTmp:0}),(l()(),e.rb(16777216,null,0,1,null,T)),e.Bb(9,16384,[[1,4]],0,i.Sb,[e.T,e.X],null,null)],(function(l,n){var u=n.component;l(n,2,0,"none"),l(n,4,0,u.filteredWorkers)}),null)}function w(l){return e.Xb(0,[(l()(),e.Cb(0,0,null,null,7,null,null,null,null,null,null,null)),(l()(),e.Cb(1,0,null,null,4,"h2",[["class","ion-text-center"]],null,null,null,null,null)),(l()(),e.Vb(2,null,[" "," "])),(l()(),e.Cb(3,0,null,null,2,"ion-badge",[["class","quadrille-badge"],["color","primary"]],null,null,null,k.Y,k.d)),e.Bb(4,49152,null,0,i.k,[e.j,e.p,e.F],{color:[0,"color"]},null),(l()(),e.Vb(5,0,["",""])),(l()(),e.rb(16777216,null,null,1,null,A)),e.Bb(7,16384,null,0,m.l,[e.X,e.T],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(0,null,null,0))],(function(l,n){var u=n.component;l(n,4,0,"primary"),l(n,7,0,u.filteredWorkers.length>0)}),(function(l,n){var u=n.component;l(n,2,0,u.quadrille.name),l(n,5,0,u.filteredWorkers.length)}))}function I(l){return e.Xb(0,[(l()(),e.Cb(0,0,null,null,3,null,null,null,null,null,null,null)),(l()(),e.Cb(1,0,null,null,2,"ion-button",[["color","warning"],["expand","block"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.selectQuadrille()&&e),e}),k.Z,k.e)),e.Bb(2,49152,null,0,i.l,[e.j,e.p,e.F],{color:[0,"color"],expand:[1,"expand"]},null),(l()(),e.Vb(3,0,[" Traspasar "," "]))],(function(l,n){l(n,2,0,"warning","block")}),(function(l,n){l(n,3,0,n.component.selectedWorkers.length)}))}function R(l){return e.Xb(0,[(l()(),e.Cb(0,0,null,null,3,null,null,null,null,null,null,null)),(l()(),e.Cb(1,0,null,null,2,"ion-button",[["color","success"],["expand","block"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.acceptRejectWorkers()&&e),e}),k.Z,k.e)),e.Bb(2,49152,null,0,i.l,[e.j,e.p,e.F],{color:[0,"color"],expand:[1,"expand"]},null),(l()(),e.Vb(3,0,[" Aprobar "," "]))],(function(l,n){l(n,2,0,"success","block")}),(function(l,n){l(n,3,0,n.component.selectedWorkers.length)}))}function X(l){return e.Xb(0,[(l()(),e.Cb(0,0,null,null,6,null,null,null,null,null,null,null)),(l()(),e.Cb(1,0,null,null,5,"ion-col",[],null,null,null,k.hb,k.m)),e.Bb(2,49152,null,0,i.u,[e.j,e.p,e.F],null,null),(l()(),e.rb(16777216,null,0,1,null,I)),e.Bb(4,16384,null,0,m.l,[e.X,e.T],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(16777216,null,0,1,null,R)),e.Bb(6,16384,null,0,m.l,[e.X,e.T],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,4,0,""===u.selectedWorkers[0].quadrilleStatus),l(n,6,0,"rechazado"===u.selectedWorkers[0].quadrilleStatus)}),null)}function O(l){return e.Xb(0,[(l()(),e.Cb(0,0,null,null,10,null,null,null,null,null,null,null)),(l()(),e.Cb(1,0,null,null,4,"ion-col",[],null,null,null,k.hb,k.m)),e.Bb(2,49152,null,0,i.u,[e.j,e.p,e.F],null,null),(l()(),e.Cb(3,0,null,0,2,"ion-button",[["color","success"],["expand","block"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.acceptWorkers()&&e),e}),k.Z,k.e)),e.Bb(4,49152,null,0,i.l,[e.j,e.p,e.F],{color:[0,"color"],expand:[1,"expand"]},null),(l()(),e.Vb(5,0,[" Aprobar "," "])),(l()(),e.Cb(6,0,null,null,4,"ion-col",[],null,null,null,k.hb,k.m)),e.Bb(7,49152,null,0,i.u,[e.j,e.p,e.F],null,null),(l()(),e.Cb(8,0,null,0,2,"ion-button",[["color","danger"],["expand","block"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.rejectWorkers()&&e),e}),k.Z,k.e)),e.Bb(9,49152,null,0,i.l,[e.j,e.p,e.F],{color:[0,"color"],expand:[1,"expand"]},null),(l()(),e.Vb(10,0,[" Rechazar "," "]))],(function(l,n){l(n,4,0,"success","block"),l(n,9,0,"danger","block")}),(function(l,n){var u=n.component;l(n,5,0,u.selectedWorkers.length),l(n,10,0,u.selectedWorkers.length)}))}function P(l){return e.Xb(0,[(l()(),e.Cb(0,0,null,null,6,null,null,null,null,null,null,null)),(l()(),e.Cb(1,0,null,null,5,"ion-row",[],null,null,null,k.Eb,k.J)),e.Bb(2,49152,null,0,i.kb,[e.j,e.p,e.F],null,null),(l()(),e.rb(16777216,null,0,1,null,X)),e.Bb(4,16384,null,0,m.l,[e.X,e.T],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(16777216,null,0,1,null,O)),e.Bb(6,16384,null,0,m.l,[e.X,e.T],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,4,0,0===u.selectedWorkers[0].quadrilleToApprove),l(n,6,0,u.selectedWorkers[0].quadrilleToApprove>0)}),null)}function y(l){return e.Xb(0,[e.Pb(0,C,[]),e.Pb(0,m.r,[]),(l()(),e.Cb(2,0,null,null,16,"ion-header",[],null,null,null,k.nb,k.s)),e.Bb(3,49152,null,0,i.C,[e.j,e.p,e.F],null,null),(l()(),e.Cb(4,0,null,0,14,"ion-toolbar",[["class","background-color-header"]],null,null,null,k.Ob,k.T)),e.Bb(5,49152,null,0,i.Db,[e.j,e.p,e.F],null,null),(l()(),e.Cb(6,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,k.ab,k.f)),e.Bb(7,49152,null,0,i.m,[e.j,e.p,e.F],null,null),(l()(),e.Cb(8,0,null,0,2,"ion-back-button",[["class","header-back-button"],["text",""]],null,[[null,"click"]],(function(l,n,u){var r=!0;return"click"===n&&(r=!1!==e.Nb(l,10).onClick(u)&&r),r}),k.X,k.c)),e.Bb(9,49152,null,0,i.h,[e.j,e.p,e.F],{text:[0,"text"]},null),e.Bb(10,16384,null,0,i.i,[[2,i.jb],i.Jb],null,null),(l()(),e.Cb(11,0,null,0,3,"ion-title",[],null,null,null,k.Nb,k.S)),e.Bb(12,49152,null,0,i.Bb,[e.j,e.p,e.F],null,null),(l()(),e.Cb(13,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),e.Vb(-1,null,["Trabajadores"])),(l()(),e.Cb(15,0,null,0,3,"ion-buttons",[["slot","end"]],null,null,null,k.ab,k.f)),e.Bb(16,49152,null,0,i.m,[e.j,e.p,e.F],null,null),(l()(),e.Cb(17,0,null,0,1,"app-notifications",[],null,null,null,B.b,B.a)),e.Bb(18,114688,null,0,L.a,[],null,null),(l()(),e.Cb(19,0,null,null,7,"ion-content",[],null,null,null,k.ib,k.n)),e.Bb(20,49152,null,0,i.v,[e.j,e.p,e.F],null,null),(l()(),e.Cb(21,0,null,0,3,"ion-refresher",[["class","refresher"],["slot","fixed"]],null,[[null,"ionRefresh"]],(function(l,n,u){var e=!0;return"ionRefresh"===n&&(e=!1!==l.component.reload(u)&&e),e}),k.Db,k.H)),e.Bb(22,49152,null,0,i.eb,[e.j,e.p,e.F],null,null),(l()(),e.Cb(23,0,null,0,1,"ion-refresher-content",[["pullingIcon","arrow-dropdown"],["pullingText","Pull to refresh"],["refreshingSpinner","circles"],["refreshingText","Cargando..."]],null,null,null,k.Cb,k.I)),e.Bb(24,49152,null,0,i.fb,[e.j,e.p,e.F],{pullingIcon:[0,"pullingIcon"],pullingText:[1,"pullingText"],refreshingSpinner:[2,"refreshingSpinner"],refreshingText:[3,"refreshingText"]},null),(l()(),e.rb(16777216,null,0,1,null,w)),e.Bb(26,16384,null,0,m.l,[e.X,e.T],{ngIf:[0,"ngIf"]},null),(l()(),e.Cb(27,0,null,null,3,"ion-footer",[],null,null,null,k.mb,k.r)),e.Bb(28,49152,null,0,i.A,[e.j,e.p,e.F],null,null),(l()(),e.rb(16777216,null,0,1,null,P)),e.Bb(30,16384,null,0,m.l,[e.X,e.T],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,9,0,""),l(n,18,0),l(n,24,0,"arrow-dropdown","Pull to refresh","circles","Cargando..."),l(n,26,0,u.quadrille),l(n,30,0,u.selectedWorkers.length>0)}),null)}function D(l){return e.Xb(0,[(l()(),e.Cb(0,0,null,null,1,"app-rem-workers",[],null,null,null,y,W)),e.Bb(1,245760,null,0,p,[t.a,S.a,o.a,i.a,a.a,s.a,c.a,b.a],null,null)],(function(l,n){l(n,1,0)}),null)}var M=e.yb("app-rem-workers",p,D,{},{},[]),V=u("s7LF"),$=u("IheW"),E=u("aVMi"),Z=u("1dSU"),z=u("xgBC"),N=u("QURO"),_=u("ElRG"),G=u("v2G1"),H=u("t8sF"),Q=u("s3Gz"),U=u("ZWll"),Y=u("Pn9U"),J=u("imvL"),K=u("wMzM"),ll=u("AjED"),nl=u("Q1xG"),ul=u("PCNd");u.d(n,"RemWorkersPageModuleNgFactory",(function(){return el}));var el=e.zb(h,[],(function(l){return e.Kb([e.Lb(512,e.m,e.kb,[[8,[f.a,g.a,M]],[3,e.m],e.D]),e.Lb(4608,m.n,m.m,[e.z,[2,m.y]]),e.Lb(4608,V.o,V.o,[]),e.Lb(4608,i.c,i.c,[e.F,e.g]),e.Lb(4608,i.Ib,i.Ib,[i.c,e.m,e.w]),e.Lb(4608,i.Mb,i.Mb,[i.c,e.m,e.w]),e.Lb(4608,$.j,$.p,[m.c,e.I,$.n]),e.Lb(4608,$.q,$.q,[$.j,$.o]),e.Lb(5120,$.a,(function(l){return[l]}),[$.q]),e.Lb(4608,$.m,$.m,[]),e.Lb(6144,$.k,null,[$.m]),e.Lb(4608,$.i,$.i,[$.k]),e.Lb(6144,$.b,null,[$.i]),e.Lb(4608,$.g,$.l,[$.b,e.w]),e.Lb(4608,$.c,$.c,[$.g]),e.Lb(4608,V.c,V.c,[]),e.Lb(4608,E.a,E.a,[i.Rb]),e.Lb(4608,c.a,c.a,[S.n,b.a,E.a]),e.Lb(4608,Z.a,Z.a,[z.b]),e.Lb(4608,s.a,s.a,[$.c,c.a,Z.a]),e.Lb(4608,N.a,N.a,[_.a,i.Lb]),e.Lb(4608,G.a,G.a,[i.b]),e.Lb(4608,H.a,H.a,[]),e.Lb(4608,Q.a,Q.a,[]),e.Lb(4608,U.a,U.a,[Y.a,E.a,o.a]),e.Lb(4608,t.a,t.a,[J.a,$.c,Z.a,c.a]),e.Lb(4608,K.a,K.a,[]),e.Lb(4608,ll.a,ll.a,[c.a,$.c]),e.Lb(4608,a.a,a.a,[c.a,$.c]),e.Lb(1073742336,m.b,m.b,[]),e.Lb(1073742336,V.n,V.n,[]),e.Lb(1073742336,V.g,V.g,[]),e.Lb(1073742336,i.Fb,i.Fb,[]),e.Lb(1073742336,$.e,$.e,[]),e.Lb(1073742336,$.d,$.d,[]),e.Lb(1073742336,V.l,V.l,[]),e.Lb(1073742336,nl.a,nl.a,[]),e.Lb(1073742336,ul.a,ul.a,[]),e.Lb(1073742336,S.p,S.p,[[2,S.u],[2,S.n]]),e.Lb(1073742336,h,h,[]),e.Lb(256,$.n,"XSRF-TOKEN",[]),e.Lb(256,$.o,"X-XSRF-TOKEN",[]),e.Lb(1024,S.l,(function(){return[[{path:":id",component:p}]]}),[])])}))}}]);