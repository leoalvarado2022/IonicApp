{"version":3,"sources":["src/app/home-page/planning/harvest-estimate/harvest-estimate-form/harvest-estimate-form.component.html","src/app/home-page/planning/harvest-estimate/harvest-estimate.page.html","src/app/home-page/planning/harvest-estimate/harvest-estimate-form/harvest-estimate-form.component.scss","src/app/home-page/planning/harvest-estimate/harvest-estimate-form/harvest-estimate-form.component.ts","src/app/home-page/planning/harvest-estimate/harvest-estimate.module.ts","src/app/home-page/planning/harvest-estimate/harvest-estimate.page.scss","src/app/home-page/planning/harvest-estimate/harvest-estimate.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button (click)=\\\"closeModal()\\\" color=\\\"secondary\\\">\\r\\n        <ion-icon name=\\\"arrow-back\\\" slot=\\\"icon-only\\\" style=\\\"color:white;\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title> {{ harvestEstimate ? 'Ver' : 'Registrar'  }}  Estimacion</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <form [formGroup]=\\\"harvestForm\\\">\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"floating\\\">\\r\\n        Cantidad {{ showUnitName() | uppercase }}\\r\\n      </ion-label>\\r\\n      <ion-input [value]=\\\"harvestForm.get('quantity') .value | mask: 'separator'\\\" clearInput formControlName=\\\"quantity\\\" placeholder=\\\"Ingresar Cantidad\\\" type=\\\"tel\\\"></ion-input>\\r\\n      <ng-container *ngIf=\\\"harvestForm.get('quantity').dirty\\\">\\r\\n        <span *ngIf=\\\"harvestForm.get('quantity').hasError('required')\\\" class=\\\"errorMsg\\\">Ingrese Cantidad</span>\\r\\n        <span *ngIf=\\\"harvestForm.get('quantity').hasError('pattern')\\\" class=\\\"errorMsg\\\">Solo numeros</span>\\r\\n      </ng-container>\\r\\n    </ion-item>\\r\\n\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"floating\\\">\\r\\n        Cantidad Diaria {{ showUnitName() | uppercase }}\\r\\n      </ion-label>\\r\\n      <ion-input [value]=\\\"harvestForm.get('dailyAmount') .value | mask: 'separator'\\\" clearInput formControlName=\\\"dailyAmount\\\" placeholder=\\\"Ingresar Cantidad Diaria\\\" type=\\\"tel\\\"></ion-input>\\r\\n      <ng-container *ngIf=\\\"harvestForm.get('dailyAmount').dirty\\\">\\r\\n        <span *ngIf=\\\"harvestForm.get('dailyAmount').hasError('required')\\\" class=\\\"errorMsg\\\">Ingrese cantidad diaria</span>\\r\\n        <span *ngIf=\\\"harvestForm.get('quantity').hasError('pattern')\\\" class=\\\"errorMsg\\\">Solo numeros</span>\\r\\n      </ng-container>\\r\\n    </ion-item>\\r\\n\\r\\n    <ion-list>\\r\\n      <ion-radio-group>\\r\\n        <ion-list-header>\\r\\n          <ion-label>Trabaja Festivos ?</ion-label>\\r\\n        </ion-list-header>\\r\\n\\r\\n        <ion-item>\\r\\n          <ion-label>Si</ion-label>\\r\\n          <ion-radio (ionSelect)=\\\"workHolidaysEvent($event.detail.value)\\\" [checked]=\\\"harvestForm.get('workHolidays').value === 1\\\" [disabled]=\\\"isView\\\" slot=\\\"start\\\" value=\\\"1\\\"></ion-radio>\\r\\n        </ion-item>\\r\\n\\r\\n        <ion-item>\\r\\n          <ion-label>No</ion-label>\\r\\n          <ion-radio (ionSelect)=\\\"workHolidaysEvent($event.detail.value)\\\" [checked]=\\\"harvestForm.get('workHolidays').value === 0\\\" [disabled]=\\\"isView\\\" slot=\\\"start\\\" value=\\\"0\\\"></ion-radio>\\r\\n        </ion-item>\\r\\n\\r\\n        <ng-container *ngIf=\\\"harvestForm.get('workHolidays').dirty && harvestForm.get('workHolidays').hasError('required')\\\">\\r\\n          <span class=\\\"errorMsg\\\">Indique si trabaja los feriados.</span>\\r\\n        </ng-container>\\r\\n      </ion-radio-group>\\r\\n    </ion-list>\\r\\n\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"floating\\\">Fecha Inicio</ion-label>\\r\\n      <ion-datetime [displayFormat]=\\\"dateFormat\\\" [max]=\\\"maxDate\\\" [pickerFormat]=\\\"dateFormat\\\" formControlName=\\\"startDate\\\" placeholder=\\\"Ingresar Fecha Inicio\\\"></ion-datetime>\\r\\n      <ng-container *ngIf=\\\"harvestForm.get('startDate').dirty && harvestForm.get('startDate').hasError('required')\\\">\\r\\n        <span class=\\\"errorMsg\\\">Ingrese fecha inicio</span>\\r\\n      </ng-container>\\r\\n    </ion-item>\\r\\n\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"floating\\\">Fecha Fin</ion-label>\\r\\n      <ion-input [value]=\\\" harvestForm.get('endDate').value\\\" disabled=\\\"true\\\"></ion-input>\\r\\n    </ion-item>\\r\\n\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"fixed\\\">Plantas de Proceso</ion-label>\\r\\n      <ion-select [interfaceOptions]=\\\"processPlantAction\\\" [selectedText]=\\\"getSelectedProcessPlant()\\\" cancelText=\\\"Cancelar\\\" formControlName=\\\"processPlant\\\" interface=\\\"action-sheet\\\">\\r\\n        <ion-select-option *ngFor=\\\"let plant of processPlants\\\" [value]=\\\"plant.id\\\">\\r\\n          {{ plant.name }}\\r\\n        </ion-select-option>\\r\\n      </ion-select>\\r\\n    </ion-item>\\r\\n\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"fixed\\\">Destino</ion-label>\\r\\n      <ion-select [interfaceOptions]=\\\"destinationAction\\\" [selectedText]=\\\"getSelectedDestination()\\\" cancelText=\\\"Cancelar\\\" formControlName=\\\"destination\\\" interface=\\\"action-sheet\\\">\\r\\n        <ion-select-option *ngFor=\\\"let destination of destinations\\\" [value]=\\\"destination.id\\\">\\r\\n          {{ destination.name }}\\r\\n        </ion-select-option>\\r\\n      </ion-select>\\r\\n    </ion-item>\\r\\n\\r\\n    <br><br>\\r\\n    <ng-container *ngIf=\\\"!harvestEstimate\\\">\\r\\n      <ion-button (click)=\\\"submit()\\\" [disabled]=\\\"harvestForm.invalid || isSaving\\\" color=\\\"primary\\\" expand=\\\"block\\\">\\r\\n        Guardar\\r\\n      </ion-button>\\r\\n    </ng-container>\\r\\n\\r\\n  </form>\\r\\n</ion-content>\\r\\n\"","export default \"<ion-header>\\r\\n  <ion-toolbar class=\\\"background-color-header\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button class=\\\"white\\\" text=\\\"\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"white\\\">\\r\\n      <strong>Estimación de Cosecha</strong>\\r\\n    </ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <app-notifications></app-notifications>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-searchbar placeholder=\\\"Buscar...\\\" (ionChange)=\\\"searchHarvest($event.target.value)\\\" (ionClear)=\\\"cancelSearch()\\\" animated class=\\\"production\\\" showCancelButton=\\\"never\\\"></ion-searchbar>\\r\\n\\r\\n<ion-content class=\\\"content\\\">\\r\\n\\r\\n  <ng-container *ngFor=\\\"let harvest of filteredHarvestEstimate ; let index =index\\\">\\r\\n    <div class=\\\"card-sli\\\">\\r\\n      <div class=\\\"card-sli-back\\\">\\r\\n        <app-harvest-estimate-item\\r\\n          (deleteHarvest)=\\\"deleteHarvest($event)\\\"\\r\\n          (harvestSelected)=\\\"viewHarvest($event)\\\"\\r\\n          [isOld]=\\\"index > 0\\\"\\r\\n          [item]=\\\"harvest\\\"\\r\\n          [slideDisabled]=\\\"false\\\">\\r\\n        </app-harvest-estimate-item>\\r\\n      </div>\\r\\n    </div>\\r\\n  </ng-container>\\r\\n\\r\\n  <ng-container *ngIf=\\\"checkButton()\\\">\\r\\n    <ion-fab horizontal=\\\"end\\\" slot=\\\"fixed\\\" vertical=\\\"bottom\\\">\\r\\n      <ion-fab-button (click)=\\\"openForm()\\\" [disabled]=\\\"!costCenter || !isOnline\\\" color=\\\"warning\\\">\\r\\n        <ion-icon name=\\\"add\\\"></ion-icon>\\r\\n      </ion-fab-button>\\r\\n    </ion-fab>\\r\\n  </ng-container>\\r\\n\\r\\n</ion-content>\\r\\n\"","export default \".errorMsg {\\n  color: red;\\n}\\n\\nion-item ion-label {\\n  min-width: 50%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS1wYWdlL3BsYW5uaW5nL2hhcnZlc3QtZXN0aW1hdGUvaGFydmVzdC1lc3RpbWF0ZS1mb3JtL0Q6XFxucG1cXGZ4MTFfbW9iaWxlL3NyY1xcYXBwXFxob21lLXBhZ2VcXHBsYW5uaW5nXFxoYXJ2ZXN0LWVzdGltYXRlXFxoYXJ2ZXN0LWVzdGltYXRlLWZvcm1cXGhhcnZlc3QtZXN0aW1hdGUtZm9ybS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvaG9tZS1wYWdlL3BsYW5uaW5nL2hhcnZlc3QtZXN0aW1hdGUvaGFydmVzdC1lc3RpbWF0ZS1mb3JtL2hhcnZlc3QtZXN0aW1hdGUtZm9ybS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFVBQUE7QUNDRjs7QURHRTtFQUNFLGNBQUE7QUNBSiIsImZpbGUiOiJzcmMvYXBwL2hvbWUtcGFnZS9wbGFubmluZy9oYXJ2ZXN0LWVzdGltYXRlL2hhcnZlc3QtZXN0aW1hdGUtZm9ybS9oYXJ2ZXN0LWVzdGltYXRlLWZvcm0uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZXJyb3JNc2cge1xyXG4gIGNvbG9yOiByZWQ7XHJcbn1cclxuXHJcbmlvbi1pdGVtIHtcclxuICBpb24tbGFiZWwge1xyXG4gICAgbWluLXdpZHRoOiA1MCU7XHJcbiAgfVxyXG59XHJcbiIsIi5lcnJvck1zZyB7XG4gIGNvbG9yOiByZWQ7XG59XG5cbmlvbi1pdGVtIGlvbi1sYWJlbCB7XG4gIG1pbi13aWR0aDogNTAlO1xufSJdfQ== */\"","import {Component, Input, OnInit} from '@angular/core';\r\nimport {ModalController} from '@ionic/angular';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {CostCenter, EntityList, Generic, HarvestEstimate, Unit} from '@primetec/primetec-angular';\r\nimport {SyncService} from '../../../../shared/services/sync/sync.service';\r\nimport {ContractDetailService} from '../../services/contract-detail/contract-detail.service';\r\nimport * as moment from 'moment';\r\nimport {AuthService} from '../../../../shared/services/auth/auth.service';\r\nimport {ToastService} from '../../../../shared/services/toast/toast.service';\r\nimport {HttpService} from '../../../../shared/services/http/http.service';\r\nimport {LoaderService} from '../../../../shared/services/loader/loader.service';\r\nimport {debounceTime} from 'rxjs/operators';\r\nimport {StoreService} from '../../../../shared/services/store/store.service';\r\n\r\n@Component({\r\n  selector: 'app-harvest-estimate-form',\r\n  templateUrl: './harvest-estimate-form.component.html',\r\n  styleUrls: ['./harvest-estimate-form.component.scss']\r\n})\r\nexport class HarvestEstimateFormComponent implements OnInit {\r\n\r\n  @Input() costCenter: CostCenter;\r\n  @Input() harvestEstimate: HarvestEstimate;\r\n  @Input() isView: boolean;\r\n  @Input() previous: HarvestEstimate;\r\n\r\n  public readonly processPlantAction: any = {\r\n    header: 'Plantas de Proceso',\r\n    keyboardClose: false,\r\n    backdropDismiss: false\r\n  };\r\n\r\n  public readonly destinationAction: any = {\r\n    header: 'Destinos',\r\n    keyboardClose: false,\r\n    backdropDismiss: false\r\n  };\r\n\r\n  public readonly dateFormat = 'DD/MM/YYYY';\r\n  public readonly maxDate = '2030';\r\n  public harvestForm: FormGroup;\r\n  public units: Array<Unit> = [];\r\n  public processPlants: Array<EntityList> = [];\r\n  public destinations: Array<Generic> = [];\r\n\r\n  public isSaving = false;\r\n  public holidays: Array<any> = [];\r\n  private userCompany: any;\r\n\r\n  constructor(\r\n    private modalController: ModalController,\r\n    private formBuilder: FormBuilder,\r\n    private syncService: SyncService,\r\n    private contractDetailService: ContractDetailService,\r\n    private authService: AuthService,\r\n    private toastService: ToastService,\r\n    private httpService: HttpService,\r\n    private loaderService: LoaderService,\r\n    private storeService: StoreService\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.holidays = this.storeService.getHolidays();\r\n    this.userCompany = this.storeService.getActiveCompany();\r\n\r\n    if (this.isView) {\r\n      this.harvestForm = this.formBuilder.group({\r\n        id: [this.harvestEstimate.id],\r\n        costCenter: [this.costCenter.id],\r\n        user: [this.userCompany.user],\r\n        unit: [this.costCenter.controlUnit],\r\n        quantity: [{value: this.harvestEstimate.quantity, disabled: true}],\r\n        dailyAmount: [{value: this.harvestEstimate.dailyAmount, disabled: true}],\r\n        workHolidays: [{value: this.harvestEstimate.workHolidays ? 1 : 0, disabled: true}],\r\n        startDate: [{value: moment.utc(this.harvestEstimate.startDate).format('YYYY-MM-DD'), disabled: true}],\r\n        endDate: [moment.utc(this.harvestEstimate.endDate).format('DD/MM/YYYY')],\r\n        processPlant: [{value: this.harvestEstimate ? this.harvestEstimate.processPlant : '', disabled: true}, Validators.required],\r\n        destination: [{value: this.harvestEstimate ? this.harvestEstimate.destination : '', disabled: true}, Validators.required]\r\n      });\r\n    } else {\r\n      this.harvestForm = this.formBuilder.group({\r\n        id: [0, Validators.required],\r\n        costCenter: [this.costCenter.id],\r\n        user: [this.userCompany.user, Validators.required],\r\n        unit: [this.costCenter.controlUnit, Validators.required],\r\n        quantity: [this.previous ? this.previous.quantity : '', [\r\n          Validators.required,\r\n          Validators.pattern(/^([0-9.])+$/),\r\n          Validators.min(1)\r\n        ]],\r\n        dailyAmount: [this.previous ? this.previous.dailyAmount : '', [\r\n          Validators.required,\r\n          Validators.pattern(/^([0-9.])+$/),\r\n          Validators.min(1)\r\n        ]],\r\n        workHolidays: [this.previous ? this.previous.workHolidays ? 1 : 0 : 0, Validators.required],\r\n        startDate: [this.previous ? moment(this.cleanDate(this.previous.startDate), 'YYYY-MM-DD').format('YYYY-MM-DD') : this.costCenter.harvestDate, Validators.required],\r\n        endDate: [this.previous ? moment(this.cleanDate(this.previous.endDate), 'YYYY-MM-DD').format('DD/MM/YYYY') : '', Validators.required],\r\n        processPlant: [this.previous ? this.previous.processPlant : '', Validators.required],\r\n        destination: [this.previous ? this.previous.destination : '', Validators.required]\r\n      });\r\n\r\n      this.harvestForm.valueChanges.pipe(\r\n        debounceTime(1000),\r\n      ).subscribe((data) => {\r\n        this.calculateEndDate();\r\n      });\r\n    }\r\n\r\n    this.loadData();\r\n  }\r\n\r\n  /**\r\n   * closeModal\r\n   */\r\n  public closeModal = (status: boolean = false) => {\r\n    this.modalController.dismiss(status);\r\n  }\r\n\r\n  /**\r\n   * submit\r\n   */\r\n  public submit = () => {\r\n    if (this.harvestForm.valid && !this.isSaving) {\r\n\r\n      this.isSaving = true;\r\n      const estimation = Object.assign({}, this.harvestForm.value);\r\n      estimation.endDate = moment(estimation.endDate, 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n      estimation.quantity = this.cleanParseNumber(estimation.quantity);\r\n      estimation.dailyAmount = this.cleanParseNumber(estimation.dailyAmount);\r\n\r\n      delete this.costCenter.active;\r\n      const data = {\r\n        costCenter: this.costCenter,\r\n        harvestEstimate: estimation\r\n      };\r\n\r\n      this.storeEstimation(data);\r\n    } else {\r\n      this.isSaving = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * showUnitName\r\n   */\r\n  public showUnitName = () => {\r\n    const find = this.units.find(item => item.id === this.costCenter.controlUnit);\r\n    return find ? find.code : 'N/A';\r\n  }\r\n\r\n  /**\r\n   * workHolidaysEvent\r\n   * @param event\r\n   */\r\n  public workHolidaysEvent = (value: string) => {\r\n    this.harvestForm.patchValue({\r\n      workHolidays: parseInt(value, 10)\r\n    });\r\n\r\n    this.harvestForm.updateValueAndValidity();\r\n  }\r\n\r\n  /**\r\n   * getSelectedProcessPlant\r\n   */\r\n  public getSelectedProcessPlant = () => {\r\n    if (this.processPlants) {\r\n      const id = this.harvestForm.get('processPlant').value;\r\n      const find = this.processPlants.find(item => item.id === id);\r\n      return find ? find.name : '';\r\n    }\r\n\r\n    return '';\r\n  }\r\n\r\n  /**\r\n   * getSelectedDestination\r\n   */\r\n  public getSelectedDestination = () => {\r\n    if (this.destinations) {\r\n      const id = this.harvestForm.get('destination').value;\r\n      const find = this.destinations.find(item => item['id'] === id);\r\n      return find ? find['name'] : '';\r\n    }\r\n\r\n    return '';\r\n  }\r\n\r\n  /**\r\n   * loadData\r\n   */\r\n  private loadData = () => {\r\n    this.units = this.storeService.getUnits();\r\n    this.processPlants = this.storeService.getProcessPlants();\r\n    this.destinations = this.storeService.getDestinations();\r\n\r\n    this.preSelectProcessPlant();\r\n    this.preSelectDestination();\r\n  }\r\n\r\n  /**\r\n   * storeEstimation\r\n   * @param data\r\n   */\r\n  private storeEstimation = (data: any) => {\r\n    this.loaderService.startLoader('Guardando estimacion...');\r\n    this.contractDetailService.storeHarvest(data).subscribe(success => {\r\n      this.loaderService.stopLoader();\r\n      this.isSaving = false;\r\n      this.closeModal(true);\r\n    }, error => {\r\n      this.loaderService.stopLoader();\r\n      this.isSaving = false;\r\n      this.httpService.errorHandler(error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * calculateEndDate\r\n   */\r\n  private calculateEndDate = () => {\r\n    const {\r\n      quantity,\r\n      dailyAmount,\r\n      workHolidays,\r\n      startDate\r\n    } = this.harvestForm.value;\r\n\r\n    if (quantity && dailyAmount) {\r\n      const days = Math.ceil((this.cleanParseNumber(quantity) > 0 ? this.cleanParseNumber(quantity) : 1) / (this.cleanParseNumber(dailyAmount) > 0 ? this.cleanParseNumber(dailyAmount) : 1));\r\n      const holidays = [];\r\n      const daysAdded = 1;\r\n      let momentDate = moment.utc(startDate);\r\n\r\n      if (workHolidays === 0) {\r\n        this.holidays.forEach(holiday => {\r\n          holidays.push(moment.utc(holiday.fecha).format(this.dateFormat));\r\n        });\r\n      }\r\n\r\n      momentDate = this.computeEndDate(days, daysAdded, momentDate, holidays);\r\n\r\n      this.harvestForm.patchValue({\r\n        endDate: momentDate.format(this.dateFormat)\r\n      });\r\n\r\n      this.harvestForm.updateValueAndValidity();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * cleanDate\r\n   * @param date\r\n   */\r\n  private cleanDate = (date: string) => {\r\n    if (date.includes('T')) {\r\n      return date.split('T')[0];\r\n    }\r\n\r\n    return date;\r\n  }\r\n\r\n  /**\r\n   * computeEndDate\r\n   * @param workingDays\r\n   * @param daysAdded\r\n   * @param momentDate\r\n   */\r\n  private computeEndDate = (workingDays: number = 1, daysAdded: number = 1, momentDate: any, holidays: Array<any> = []) => {\r\n    if (workingDays > daysAdded && daysAdded < 60) {\r\n      if (momentDate.weekday() > 0 && !holidays.includes(momentDate.format(this.dateFormat))) {\r\n        daysAdded++;\r\n      }\r\n\r\n      momentDate = momentDate.add(1, 'days');\r\n      return this.computeEndDate(workingDays, daysAdded, momentDate, holidays);\r\n    }\r\n\r\n    return momentDate;\r\n  }\r\n\r\n  /**\r\n   * cleanParseNumber\r\n   * @param value\r\n   */\r\n  private cleanParseNumber = (value: string): number => {\r\n    return parseInt(String(value).replace('.', ''), 10);\r\n  }\r\n\r\n  /**\r\n   * preSelectProcessPlant\r\n   */\r\n  private preSelectProcessPlant = () => {\r\n    if (this.processPlants.length === 1) {\r\n      this.harvestForm.patchValue({\r\n        processPlant: this.processPlants[0].id\r\n      });\r\n\r\n      this.harvestForm.updateValueAndValidity();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * preSelectDestination\r\n   */\r\n  private preSelectDestination = () => {\r\n    if (this.destinations.length === 1) {\r\n      this.harvestForm.patchValue({\r\n        destination: this.destinations[0].id\r\n      });\r\n\r\n      this.harvestForm.updateValueAndValidity();\r\n    }\r\n  }\r\n\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {RouterModule, Routes} from '@angular/router';\r\nimport {HarvestEstimatePage} from './harvest-estimate.page';\r\nimport {SharedModule} from '../../../shared/shared.module';\r\nimport {HarvestEstimateFormComponent} from './harvest-estimate-form/harvest-estimate-form.component';\r\nimport {NgxMaskModule} from 'ngx-mask';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: HarvestEstimatePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    RouterModule.forChild(routes),\r\n    NgxMaskModule\r\n  ],\r\n  declarations: [\r\n    HarvestEstimatePage,\r\n    HarvestEstimateFormComponent\r\n  ],\r\n  entryComponents: [\r\n    HarvestEstimateFormComponent\r\n  ]\r\n})\r\nexport class HarvestEstimatePageModule {\r\n\r\n}\r\n","export default \".card-content {\\n  margin-bottom: 5px;\\n}\\n.card-content .estimate-content {\\n  display: table;\\n  width: 100%;\\n}\\n.card-content .estimate-content.old .card {\\n  background: var(--color-box-light) !important;\\n}\\n.card-content .estimate-content .card {\\n  display: table-cell;\\n  text-align: center;\\n  width: 33.3%;\\n  padding: 5px;\\n  background: white;\\n}\\n.card-content .estimate-content .card p {\\n  margin: 0;\\n}\\n.card-content .estimate-content .card p:nth-child(1) {\\n  font-size: 10px;\\n  color: var(--ion-color-medium-shade);\\n}\\n.card-content .estimate-content .card p:nth-child(2) {\\n  font-size: 14px;\\n}\\n.card-content .update-card {\\n  background: var(--color-login-header);\\n  width: 100%;\\n}\\n.card-content .update-card.old {\\n  background: white !important;\\n  height: 16px;\\n  padding: 0 5px;\\n}\\n.card-content .update-card.old p {\\n  color: var(--ion-color-light-shade) !important;\\n}\\n.card-content .update-card p {\\n  color: white;\\n  margin: 0;\\n  font-size: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS1wYWdlL3BsYW5uaW5nL2hhcnZlc3QtZXN0aW1hdGUvRDpcXG5wbVxcZngxMV9tb2JpbGUvc3JjXFxhcHBcXGhvbWUtcGFnZVxccGxhbm5pbmdcXGhhcnZlc3QtZXN0aW1hdGVcXGhhcnZlc3QtZXN0aW1hdGUucGFnZS5zY3NzIiwic3JjL2FwcC9ob21lLXBhZ2UvcGxhbm5pbmcvaGFydmVzdC1lc3RpbWF0ZS9oYXJ2ZXN0LWVzdGltYXRlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNFLGtCQUFBO0FDQUY7QURFRTtFQUNFLGNBQUE7RUFDQSxXQUFBO0FDQUo7QURHTTtFQUNFLDZDQUFBO0FDRFI7QURLSTtFQUNFLG1CQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0VBRUEsWUFBQTtFQUNBLGlCQUFBO0FDSk47QURNTTtFQUNFLFNBQUE7QUNKUjtBRE1RO0VBQ0UsZUFBQTtFQUNBLG9DQUFBO0FDSlY7QURPUTtFQUNFLGVBQUE7QUNMVjtBRFdFO0VBV0UscUNBQUE7RUFDQSxXQUFBO0FDbkJKO0FEUUk7RUFDRSw0QkFBQTtFQUNBLFlBQUE7RUFDQSxjQUFBO0FDTk47QURRTTtFQUNFLDhDQUFBO0FDTlI7QURhSTtFQUNFLFlBQUE7RUFDQSxTQUFBO0VBQ0EsZUFBQTtBQ1hOIiwiZmlsZSI6InNyYy9hcHAvaG9tZS1wYWdlL3BsYW5uaW5nL2hhcnZlc3QtZXN0aW1hdGUvaGFydmVzdC1lc3RpbWF0ZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLmNhcmQtY29udGVudCB7XHJcbiAgbWFyZ2luLWJvdHRvbTogNXB4O1xyXG5cclxuICAuZXN0aW1hdGUtY29udGVudCB7XHJcbiAgICBkaXNwbGF5OiB0YWJsZTtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG5cclxuICAgICYub2xkIHtcclxuICAgICAgLmNhcmQge1xyXG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLWJveC1saWdodCkgIWltcG9ydGFudDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC5jYXJkIHtcclxuICAgICAgZGlzcGxheTogdGFibGUtY2VsbDtcclxuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICB3aWR0aDogMzMuMyU7XHJcbiAgICAgIC8vYm9yZGVyOiAxcHggc29saWQgdmFyKC0tY29sb3ItbG9naW4taGVhZGVyKTtcclxuICAgICAgcGFkZGluZzogNXB4O1xyXG4gICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcclxuXHJcbiAgICAgIHAge1xyXG4gICAgICAgIG1hcmdpbjogMDtcclxuXHJcbiAgICAgICAgJjpudGgtY2hpbGQoMSkge1xyXG4gICAgICAgICAgZm9udC1zaXplOiAxMHB4O1xyXG4gICAgICAgICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1tZWRpdW0tc2hhZGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJjpudGgtY2hpbGQoMikge1xyXG4gICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLnVwZGF0ZS1jYXJkIHtcclxuICAgICYub2xkIHtcclxuICAgICAgYmFja2dyb3VuZDogd2hpdGUgIWltcG9ydGFudDtcclxuICAgICAgaGVpZ2h0OiAxNnB4O1xyXG4gICAgICBwYWRkaW5nOiAwIDVweDtcclxuXHJcbiAgICAgIHAge1xyXG4gICAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItbGlnaHQtc2hhZGUpICFpbXBvcnRhbnQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1sb2dpbi1oZWFkZXIpO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcblxyXG4gICAgcCB7XHJcbiAgICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgICAgbWFyZ2luOiAwO1xyXG4gICAgICBmb250LXNpemU6IDEwcHg7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIi5jYXJkLWNvbnRlbnQge1xuICBtYXJnaW4tYm90dG9tOiA1cHg7XG59XG4uY2FyZC1jb250ZW50IC5lc3RpbWF0ZS1jb250ZW50IHtcbiAgZGlzcGxheTogdGFibGU7XG4gIHdpZHRoOiAxMDAlO1xufVxuLmNhcmQtY29udGVudCAuZXN0aW1hdGUtY29udGVudC5vbGQgLmNhcmQge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1ib3gtbGlnaHQpICFpbXBvcnRhbnQ7XG59XG4uY2FyZC1jb250ZW50IC5lc3RpbWF0ZS1jb250ZW50IC5jYXJkIHtcbiAgZGlzcGxheTogdGFibGUtY2VsbDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB3aWR0aDogMzMuMyU7XG4gIHBhZGRpbmc6IDVweDtcbiAgYmFja2dyb3VuZDogd2hpdGU7XG59XG4uY2FyZC1jb250ZW50IC5lc3RpbWF0ZS1jb250ZW50IC5jYXJkIHAge1xuICBtYXJnaW46IDA7XG59XG4uY2FyZC1jb250ZW50IC5lc3RpbWF0ZS1jb250ZW50IC5jYXJkIHA6bnRoLWNoaWxkKDEpIHtcbiAgZm9udC1zaXplOiAxMHB4O1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLW1lZGl1bS1zaGFkZSk7XG59XG4uY2FyZC1jb250ZW50IC5lc3RpbWF0ZS1jb250ZW50IC5jYXJkIHA6bnRoLWNoaWxkKDIpIHtcbiAgZm9udC1zaXplOiAxNHB4O1xufVxuLmNhcmQtY29udGVudCAudXBkYXRlLWNhcmQge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1sb2dpbi1oZWFkZXIpO1xuICB3aWR0aDogMTAwJTtcbn1cbi5jYXJkLWNvbnRlbnQgLnVwZGF0ZS1jYXJkLm9sZCB7XG4gIGJhY2tncm91bmQ6IHdoaXRlICFpbXBvcnRhbnQ7XG4gIGhlaWdodDogMTZweDtcbiAgcGFkZGluZzogMCA1cHg7XG59XG4uY2FyZC1jb250ZW50IC51cGRhdGUtY2FyZC5vbGQgcCB7XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItbGlnaHQtc2hhZGUpICFpbXBvcnRhbnQ7XG59XG4uY2FyZC1jb250ZW50IC51cGRhdGUtY2FyZCBwIHtcbiAgY29sb3I6IHdoaXRlO1xuICBtYXJnaW46IDA7XG4gIGZvbnQtc2l6ZTogMTBweDtcbn0iXX0= */\"","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {NavigationEnd, Router} from '@angular/router';\r\nimport {ModalController} from '@ionic/angular';\r\nimport {HarvestEstimateFormComponent} from './harvest-estimate-form/harvest-estimate-form.component';\r\nimport {CostCenter, HarvestEstimate} from '@primetec/primetec-angular';\r\nimport {ContractDetailService} from '../services/contract-detail/contract-detail.service';\r\nimport {HttpService} from '../../../shared/services/http/http.service';\r\nimport {LoaderService} from '../../../shared/services/loader/loader.service';\r\nimport {AlertService} from '../../../shared/services/alert/alert.service';\r\nimport {Subscription} from 'rxjs';\r\nimport {NetworkService} from '../../../shared/services/network/network.service';\r\nimport {StoreService} from '../../../shared/services/store/store.service';\r\n\r\n@Component({\r\n  selector: 'app-harvest-estimate',\r\n  templateUrl: './harvest-estimate.page.html',\r\n  styleUrls: ['./harvest-estimate.page.scss'],\r\n})\r\nexport class HarvestEstimatePage implements OnInit, OnDestroy {\r\n\r\n  public costCenter: CostCenter;\r\n  public filteredHarvestEstimate: Array<HarvestEstimate>;\r\n  public isOnline: boolean;\r\n  private harvestEstimate: Array<HarvestEstimate>;\r\n  private currentUrl: string;\r\n  private isOnline$: Subscription;\r\n  private router$: Subscription;\r\n  private store$: Subscription;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private modalController: ModalController,\r\n    private contractDetailService: ContractDetailService,\r\n    private alertService: AlertService,\r\n    private httpService: HttpService,\r\n    private loaderService: LoaderService,\r\n    private networkService: NetworkService,\r\n    private storeService: StoreService\r\n  ) {\r\n    this.isOnline$ = this.networkService.getNetworkStatus().subscribe(status => {\r\n      this.isOnline = status;\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.router$ = this.router.events.subscribe((route) => {\r\n      if (route instanceof NavigationEnd) {\r\n        this.currentUrl = route.url;\r\n      }\r\n    });\r\n\r\n    this.store$ = this.storeService.stateChanged.subscribe(data => {\r\n      this.costCenter = this.storeService.getCostCenter();\r\n      this.harvestEstimate = this.storeService.getHarvestEstimate();\r\n      this.filteredHarvestEstimate = this.storeService.getHarvestEstimate();\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.isOnline$.unsubscribe();\r\n    this.router$.unsubscribe();\r\n    this.store$.unsubscribe();\r\n  }\r\n\r\n  /**\r\n   * checkButton\r\n   */\r\n  public checkButton = () => {\r\n    return this.currentUrl === '/home-page/harvest-estimate';\r\n  }\r\n\r\n  /**\r\n   * openForm\r\n   */\r\n  public openForm = async (harvestEstimate: HarvestEstimate = null) => {\r\n    const modal = await this.modalController.create({\r\n      component: HarvestEstimateFormComponent,\r\n      componentProps: {\r\n        costCenter: this.costCenter,\r\n        harvestEstimate,\r\n        isView: harvestEstimate !== null,\r\n        previous: this.harvestEstimate.length > 0 ? this.harvestEstimate[0] : null\r\n      },\r\n      backdropDismiss: false,\r\n      keyboardClose: false,\r\n      cssClass: 'full-screen-modal'\r\n    });\r\n\r\n    modal.onDidDismiss().then((data) => {\r\n      if (data.data) {\r\n        this.reloadList();\r\n      }\r\n    });\r\n\r\n    return await modal.present();\r\n  }\r\n\r\n  /**\r\n   * searchHarvest\r\n   * @param search\r\n   */\r\n  public searchHarvest = (search: string) => {\r\n    if (search) {\r\n      this.filteredHarvestEstimate = this.harvestEstimate.filter(item => {\r\n        return (\r\n          item.userName.toLowerCase().includes(search.toLowerCase()) ||\r\n          item.quantity === parseInt(search, 10)\r\n        );\r\n      });\r\n    } else {\r\n      this.filteredHarvestEstimate = this.harvestEstimate;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * cancelSearch\r\n   */\r\n  public cancelSearch = () => {\r\n    this.filteredHarvestEstimate = this.harvestEstimate;\r\n  }\r\n\r\n  /**\r\n   * harvestSelected\r\n   * @param item\r\n   */\r\n  public viewHarvest = async (harvestEstimate: HarvestEstimate) => {\r\n    await this.openForm(harvestEstimate);\r\n  }\r\n\r\n  /**\r\n   * deleteHarvest\r\n   * @param harvestEstimate\r\n   */\r\n  public deleteHarvest = async (harvestEstimate: HarvestEstimate) => {\r\n    const respuesta = await this.alertService.confirmAlert('Desea borrar esta estimacion de cosecha?');\r\n\r\n    if (respuesta) {\r\n      const newHarvest = Object.assign({}, harvestEstimate, {\r\n        id: -harvestEstimate.id,\r\n        workHolidays: harvestEstimate ? 1 : 0\r\n      });\r\n      delete this.costCenter.active;\r\n      const data = {\r\n        costCenter: this.costCenter,\r\n        harvestEstimate: newHarvest\r\n      };\r\n\r\n      this.storeEstimation(data);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * reloadList\r\n   */\r\n  public reloadList = () => {\r\n    this.loaderService.startLoader();\r\n    this.contractDetailService.getCostCenterDetail(this.costCenter.id.toString()).subscribe((success: any) => {\r\n      this.storeService.setContractData(success.data);\r\n      this.loaderService.stopLoader();\r\n    }, error => {\r\n      this.loaderService.stopLoader();\r\n      this.httpService.errorHandler(error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * storeEstimation\r\n   * @param data\r\n   */\r\n  private storeEstimation = (data: any) => {\r\n    this.loaderService.startLoader('Borrando estimacion de cosecha');\r\n    this.contractDetailService.storeHarvest(data).subscribe(success => {\r\n      this.reloadList();\r\n      this.loaderService.stopLoader();\r\n    }, error => {\r\n      this.loaderService.stopLoader();\r\n      this.httpService.errorHandler(error);\r\n    });\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///","file":"planning-harvest-estimate-harvest-estimate-module-es5.js"}