{"version":3,"sources":["src/app/home-page/rem/rem-workers/rem-workers.page.html","src/app/home-page/rem/rem-workers/rem-workers.module.ts","src/app/home-page/rem/rem-workers/rem-workers.page.scss","src/app/home-page/rem/rem-workers/rem-workers.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar class=\\\"background-color-header\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button class=\\\"header-back-button\\\" text=\\\"\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>\\r\\n      <strong>Trabajadores</strong>\\r\\n    </ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <app-notifications></app-notifications>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-refresher (ionRefresh)=\\\"reload($event)\\\" class=\\\"refresher\\\" slot=\\\"fixed\\\">\\r\\n    <ion-refresher-content\\r\\n      pullingIcon=\\\"arrow-dropdown\\\"\\r\\n      pullingText=\\\"Pull to refresh\\\"\\r\\n      refreshingSpinner=\\\"circles\\\"\\r\\n      refreshingText=\\\"Cargando...\\\">\\r\\n    </ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n\\r\\n  <ng-container *ngIf=\\\"quadrille\\\">\\r\\n    <h2 class=\\\"ion-text-center\\\">\\r\\n      {{ quadrille.name }}\\r\\n      <ion-badge class=\\\"quadrille-badge\\\" color=\\\"primary\\\">{{ filteredWorkers.length }}</ion-badge>\\r\\n    </h2>\\r\\n\\r\\n    <ng-container *ngIf=\\\"filteredWorkers.length > 0\\\">\\r\\n      <ion-list lines=\\\"none\\\">\\r\\n        <ion-virtual-scroll [items]=\\\"filteredWorkers\\\">\\r\\n          <ion-item (click)=\\\"markWorker(worker)\\\" *virtualItem=\\\"let worker\\\" [ngClass]=\\\"{ 'workerSelected': selectedWorkers.includes(worker) }\\\">\\r\\n            <ion-icon name=\\\"contact\\\" slot=\\\"start\\\"></ion-icon>\\r\\n            <ion-label>\\r\\n              <h3 class=\\\"label-padding\\\">{{ worker.name }}</h3>\\r\\n              <div class=\\\"label-padding\\\">\\r\\n\\r\\n                <div class=\\\"ion-text-left\\\">\\r\\n                  {{ worker.identifier | rut }}\\r\\n                </div>\\r\\n                <div class=\\\"ion-text-right\\\">\\r\\n                  <ng-container *ngIf=\\\"worker.quadrilleToApprove > 0\\\">\\r\\n                    <ion-badge *ngIf=\\\"worker.quadrilleStatus === 'POR APROBAR' && worker.quadrille === quadrille.id\\\" color=\\\"warning\\\">\\r\\n                      Traspasando\\r\\n                    </ion-badge>\\r\\n                    <ion-badge *ngIf=\\\"worker.quadrilleStatus === 'POR APROBAR' && worker.quadrille !== quadrille.id\\\" color=\\\"warning\\\">\\r\\n                      Por Aprobar\\r\\n                    </ion-badge>\\r\\n                  </ng-container>\\r\\n                  <ng-container *ngIf=\\\"worker.quadrilleToApprove === 0\\\">\\r\\n                    <ion-badge color=\\\"danger\\\">{{ worker.quadrilleStatus | uppercase }}</ion-badge>\\r\\n                  </ng-container>\\r\\n                </div>\\r\\n              </div>\\r\\n            </ion-label>\\r\\n          </ion-item>\\r\\n        </ion-virtual-scroll>\\r\\n      </ion-list>\\r\\n    </ng-container>\\r\\n  </ng-container>\\r\\n\\r\\n</ion-content>\\r\\n\\r\\n<ion-footer>\\r\\n  <ng-container *ngIf=\\\"selectedWorkers.length > 0\\\">\\r\\n    <ion-row>\\r\\n      <ng-container *ngIf=\\\"selectedWorkers[0].quadrilleToApprove === 0\\\">\\r\\n        <ion-col>\\r\\n          <ng-container *ngIf=\\\"selectedWorkers[0].quadrilleStatus === ''\\\">\\r\\n            <ion-button (click)=\\\"selectQuadrille();\\\" color=\\\"warning\\\" expand=\\\"block\\\">\\r\\n              Traspasar {{ selectedWorkers.length }}\\r\\n            </ion-button>\\r\\n          </ng-container>\\r\\n          <ng-container *ngIf=\\\"selectedWorkers[0].quadrilleStatus === 'rechazado'\\\">\\r\\n            <ion-button (click)=\\\"acceptRejectWorkers()\\\" color=\\\"success\\\" expand=\\\"block\\\">\\r\\n              Aprobar {{ selectedWorkers.length }}\\r\\n            </ion-button>\\r\\n          </ng-container>\\r\\n        </ion-col>\\r\\n      </ng-container>\\r\\n\\r\\n      <ng-container *ngIf=\\\"selectedWorkers[0].quadrilleToApprove > 0\\\">\\r\\n        <ion-col>\\r\\n          <ion-button (click)=\\\"acceptWorkers();\\\" color=\\\"success\\\" expand=\\\"block\\\">\\r\\n            Aprobar {{ selectedWorkers.length }}\\r\\n          </ion-button>\\r\\n        </ion-col>\\r\\n        <ion-col>\\r\\n          <ion-button (click)=\\\"rejectWorkers();\\\" color=\\\"danger\\\" expand=\\\"block\\\">\\r\\n            Rechazar {{ selectedWorkers.length }}\\r\\n          </ion-button>\\r\\n        </ion-col>\\r\\n      </ng-container>\\r\\n    </ion-row>\\r\\n  </ng-container>\\r\\n</ion-footer>\\r\\n\"","import {NgModule} from '@angular/core';\r\nimport {RouterModule, Routes} from '@angular/router';\r\nimport {RemWorkersPage} from './rem-workers.page';\r\nimport {SharedModule} from '../../../shared/shared.module';\r\nimport {QuadrilleService} from '../rem-quadrille/services/quadrille/quadrille.service';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: ':id',\r\n    component: RemWorkersPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [RemWorkersPage],\r\n  providers: [\r\n    QuadrilleService\r\n  ]\r\n})\r\nexport class RemWorkersPageModule {\r\n\r\n}\r\n","export default \"ion-menu-button {\\n  --color: white;\\n}\\n\\nion-title {\\n  color: white;\\n}\\n\\n.label-padding {\\n  padding-top: 8px;\\n  font-size: 18px;\\n}\\n\\n.quadrille-badge {\\n  --padding-top: 5px;\\n  font-size: 1em;\\n}\\n\\n.workerSelected {\\n  --background: var(--ion-color-medium);\\n  --color: var(--ion-color-light);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS1wYWdlL3JlbS9yZW0td29ya2Vycy9EOlxcbnBtXFxmeDExX21vYmlsZS9zcmNcXGFwcFxcaG9tZS1wYWdlXFxyZW1cXHJlbS13b3JrZXJzXFxyZW0td29ya2Vycy5wYWdlLnNjc3MiLCJzcmMvYXBwL2hvbWUtcGFnZS9yZW0vcmVtLXdvcmtlcnMvcmVtLXdvcmtlcnMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsY0FBQTtBQ0NGOztBREVBO0VBQ0UsWUFBQTtBQ0NGOztBREVBO0VBQ0UsZ0JBQUE7RUFDQSxlQUFBO0FDQ0Y7O0FERUE7RUFDRSxrQkFBQTtFQUNBLGNBQUE7QUNDRjs7QURFQTtFQUNFLHFDQUFBO0VBQ0EsK0JBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL2hvbWUtcGFnZS9yZW0vcmVtLXdvcmtlcnMvcmVtLXdvcmtlcnMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLW1lbnUtYnV0dG9uIHtcclxuICAtLWNvbG9yOiB3aGl0ZTtcclxufVxyXG5cclxuaW9uLXRpdGxlIHtcclxuICBjb2xvcjogd2hpdGU7XHJcbn1cclxuXHJcbi5sYWJlbC1wYWRkaW5nIHtcclxuICBwYWRkaW5nLXRvcDogOHB4O1xyXG4gIGZvbnQtc2l6ZTogMThweDtcclxufVxyXG5cclxuLnF1YWRyaWxsZS1iYWRnZSB7XHJcbiAgLS1wYWRkaW5nLXRvcDogNXB4O1xyXG4gIGZvbnQtc2l6ZTogMWVtO1xyXG59XHJcblxyXG4ud29ya2VyU2VsZWN0ZWQge1xyXG4gIC0tYmFja2dyb3VuZDogdmFyKC0taW9uLWNvbG9yLW1lZGl1bSk7XHJcbiAgLS1jb2xvcjogdmFyKC0taW9uLWNvbG9yLWxpZ2h0KTtcclxufVxyXG4iLCJpb24tbWVudS1idXR0b24ge1xuICAtLWNvbG9yOiB3aGl0ZTtcbn1cblxuaW9uLXRpdGxlIHtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4ubGFiZWwtcGFkZGluZyB7XG4gIHBhZGRpbmctdG9wOiA4cHg7XG4gIGZvbnQtc2l6ZTogMThweDtcbn1cblxuLnF1YWRyaWxsZS1iYWRnZSB7XG4gIC0tcGFkZGluZy10b3A6IDVweDtcbiAgZm9udC1zaXplOiAxZW07XG59XG5cbi53b3JrZXJTZWxlY3RlZCB7XG4gIC0tYmFja2dyb3VuZDogdmFyKC0taW9uLWNvbG9yLW1lZGl1bSk7XG4gIC0tY29sb3I6IHZhcigtLWlvbi1jb2xvci1saWdodCk7XG59Il19 */\"","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {SyncService} from '../../../shared/services/sync/sync.service';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {LoaderService} from '../../../shared/services/loader/loader.service';\r\nimport {ActionSheetController} from '@ionic/angular';\r\nimport {QuadrilleService} from '../rem-quadrille/services/quadrille/quadrille.service';\r\nimport {UserService} from '../../../shared/services/user/user.service';\r\nimport {HttpService} from '../../../shared/services/http/http.service';\r\nimport {StoreService} from '../../../shared/services/store/store.service';\r\nimport {Subscription} from 'rxjs';\r\n\r\nenum WorkerStatus {\r\n  'POR APROBAR' = 'por aprobar',\r\n  'APROBADO' = 'aprobado',\r\n  'RECHAZADO' = 'rechazado',\r\n  'APRUEBA RECHAZO' = 'apruebarechazo'\r\n}\r\n\r\n@Component({\r\n  selector: 'app-rem-workers',\r\n  templateUrl: './rem-workers.page.html',\r\n  styleUrls: ['./rem-workers.page.scss'],\r\n})\r\nexport class RemWorkersPage implements OnInit, OnDestroy {\r\n\r\n  public filteredWorkers: Array<any> = [];\r\n  public quadrille: any;\r\n  public selectedWorkers: Array<any> = [];\r\n  private workers: Array<any> = [];\r\n  private quadrilles: Array<any> = [];\r\n  private buttons: Array<any> = [];\r\n  private userData = null;\r\n\r\n  private store$: Subscription;\r\n\r\n  constructor(\r\n    private syncService: SyncService,\r\n    private route: ActivatedRoute,\r\n    private loaderService: LoaderService,\r\n    private actionSheetController: ActionSheetController,\r\n    private quadrilleService: QuadrilleService,\r\n    private userService: UserService,\r\n    private httpService: HttpService,\r\n    private storeService: StoreService\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    const id = this.route.snapshot.paramMap.get('id');\r\n\r\n    this.store$ = this.storeService.stateChanged.subscribe(data => {\r\n      this.userData = this.storeService.getUser();\r\n      this.loadWorkers(id);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.store$.unsubscribe();\r\n  }\r\n\r\n  /**\r\n   * reload\r\n   * @param event\r\n   */\r\n  public reload = (event) => {\r\n    const id = this.route.snapshot.paramMap.get('id');\r\n    this.loadWorkers(id);\r\n    event.target.complete();\r\n  }\r\n\r\n  /**\r\n   * markWorker\r\n   * @param worker\r\n   */\r\n  public markWorker = (worker: any) => {\r\n    if (this.selectedWorkers.includes(worker)) {\r\n      const index = this.selectedWorkers.indexOf(worker);\r\n      this.selectedWorkers.splice(index, 1);\r\n    } else {\r\n      if (this.selectedWorkers.length > 0) {\r\n        this.selectedWorkers = this.selectedWorkers.filter(item => item.quadrilleStatus === worker.quadrilleStatus);\r\n      }\r\n\r\n      this.selectedWorkers.push(worker);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * selectQuadrille\r\n   */\r\n  public selectQuadrille = async () => {\r\n    const actionSheet = await this.actionSheetController.create({\r\n      header: 'Cuadrillas',\r\n      buttons: [\r\n        ...this.buttons,\r\n        {\r\n          text: 'Cancelar',\r\n          icon: 'close',\r\n          role: 'cancel',\r\n          handler: () => {\r\n            this.selectedWorkers = [];\r\n          }\r\n        }]\r\n    });\r\n\r\n    await actionSheet.present();\r\n  }\r\n\r\n  /**\r\n   * acceptWorkers\r\n   */\r\n  public acceptWorkers = () => {\r\n    this.transferWorkers(this.quadrille.id, WorkerStatus.APROBADO);\r\n  }\r\n\r\n  /**\r\n   * rejectWorkers\r\n   */\r\n  public rejectWorkers = () => {\r\n    this.transferWorkers(this.quadrille.id, WorkerStatus.RECHAZADO);\r\n  }\r\n\r\n  /**\r\n   * acceptRejectWorkers\r\n   */\r\n  public acceptRejectWorkers = () => {\r\n    this.transferWorkers(this.quadrille.id, WorkerStatus['APRUEBA RECHAZO']);\r\n  }\r\n\r\n  /**\r\n   * loadWorkers\r\n   */\r\n  private loadWorkers = (id: string) => {\r\n    this.loaderService.startLoader();\r\n    const quadrilles = this.storeService.getQuadrilles();\r\n    const allWorkers = this.storeService.getWorkers();\r\n\r\n    if (quadrilles && allWorkers) {\r\n      this.quadrilles = [...quadrilles];\r\n      this.quadrille = quadrilles.find(item => item.id === +id);\r\n      const workers = allWorkers.filter(item => item.quadrille === this.quadrille.id || item.quadrilleToApprove === this.quadrille.id);\r\n      this.workers = [...workers];\r\n      this.filteredWorkers = [...workers];\r\n\r\n      this.buildButtons();\r\n    }\r\n\r\n    this.loaderService.stopLoader();\r\n  }\r\n\r\n  /**\r\n   * buildButtons\r\n   */\r\n  private buildButtons = () => {\r\n    this.buttons = this.quadrilles\r\n      .filter(item => item !== this.quadrille)\r\n      .map(item => ({\r\n        text: item.name,\r\n        icon: 'people',\r\n        handler: () => {\r\n          this.transferWorkers(item.id, WorkerStatus['POR APROBAR']);\r\n        }\r\n      }));\r\n  }\r\n\r\n  /**\r\n   * transferWorkers\r\n   */\r\n  private transferWorkers = (quadrille: number, status: string) => {\r\n    const data = {\r\n      quadrille,\r\n      workers: this.selectedWorkers,\r\n      status\r\n    };\r\n\r\n    this.loaderService.startLoader();\r\n\r\n    this.quadrilleService.transferWorkers(data).subscribe(success => {\r\n      this.loaderService.stopLoader();\r\n      this.selectedWorkers = [];\r\n      this.reSync();\r\n    }, error => {\r\n      this.loaderService.stopLoader();\r\n      this.httpService.errorHandler(error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * reSync\r\n   */\r\n  private reSync = () => {\r\n    this.loaderService.startLoader();\r\n    const id = this.route.snapshot.paramMap.get('id');\r\n    this.syncData();\r\n    // this.loadWorkers(id);\r\n    this.loaderService.stopLoader();\r\n  }\r\n\r\n  /**\r\n   * syncData\r\n   * @param username\r\n   */\r\n  private syncData = () => {\r\n    const username = this.userData.username;\r\n    const activeConnection = this.storeService.getActiveConnection();\r\n\r\n    this.syncService.syncData(username, activeConnection.superuser ? 1 : 0).subscribe((success: any) => {\r\n      this.storeService.setSyncedData(success.data);\r\n    }, async error => {\r\n      this.httpService.errorHandler(error);\r\n    });\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///","file":"rem-rem-workers-rem-workers-module-es5.js"}