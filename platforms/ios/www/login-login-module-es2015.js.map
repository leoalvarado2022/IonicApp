{"version":3,"sources":["./src/app/modules/auth/pages/login/login.page.html","./src/app/modules/auth/pages/login/login.module.ts","./src/app/modules/auth/pages/login/login.page.scss","./src/app/modules/auth/pages/login/login.page.ts"],"names":[],"mappings":"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","file":"login-login-module-es2015.js","sourcesContent":["export default \"<ion-content>\\n  <div class=\\\"pd-default\\\">\\n    <form (ngSubmit)=\\\"onSubmit()\\\" [formGroup]=\\\"loginForm\\\">\\n      <br>\\n      <ion-item>\\n\\n        <ion-label position=\\\"floating\\\">Usuario o correo</ion-label>\\n        <ion-input\\n          formControlName=\\\"username\\\"\\n          type=\\\"text\\\">\\n        </ion-input>\\n\\n        <div *ngIf=\\\"loginForm.controls.username.dirty && loginForm.hasError('required', 'username')\\\" style=\\\"color: red\\\">\\n          El Usuario o correo es requerido.\\n        </div>\\n      </ion-item>\\n\\n      <ion-item>\\n        <ion-label position=\\\"floating\\\">Contrase침a</ion-label>\\n        <ion-input\\n          formControlName=\\\"password\\\"\\n          type=\\\"password\\\">\\n        </ion-input>\\n      </ion-item>\\n\\n      <br/>\\n      <ion-button\\n        [disabled]=\\\"loginForm.invalid\\\"\\n        color=\\\"danger\\\"\\n        expand=\\\"block\\\"\\n        type=\\\"submit\\\">\\n        Iniciar Sesi칩n\\n      </ion-button>\\n\\n      <ng-container *ngIf=\\\"innerWidth < 575\\\">\\n        <ion-row>\\n          <ion-col>\\n            <ion-item lines=\\\"none\\\">\\n              <ion-checkbox [checked]=\\\"loginForm.get('remember').value\\\" formControlName=\\\"remember\\\" slot=\\\"start\\\"></ion-checkbox>\\n              <ion-label>Recordarme</ion-label>\\n            </ion-item>\\n          </ion-col>\\n\\n          <ion-col>\\n            <ion-item lines=\\\"none\\\">\\n              <ion-label class=\\\"ion-text-center\\\" color=\\\"danger\\\">Olvide mi contrase침a</ion-label>\\n            </ion-item>\\n          </ion-col>\\n        </ion-row>\\n      </ng-container>\\n\\n      <ng-container *ngIf=\\\"innerWidth > 575\\\">\\n        <div class=\\\"ion-text-left recordarme\\\">\\n          <ion-checkbox [checked]=\\\"false\\\" color=\\\"primary\\\" formControlName=\\\"remember\\\" id=\\\"remember\\\" name='remember'></ion-checkbox>\\n          <span>Recordarme</span>\\n        </div>\\n\\n        <div class=\\\"ion-text-right\\\">\\n          <ion-button color=\\\"danger\\\" fill=\\\"clear\\\" routerDirection=\\\"forward\\\" routerLink=\\\"/auth/password-recovery\\\">Olvide mi\\n            contrase침a\\n          </ion-button>\\n        </div>\\n      </ng-container>\\n    </form>\\n  </div>\\n</ion-content>\\n\"","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {FormsModule} from '@angular/forms';\nimport {RouterModule, Routes} from '@angular/router';\n\nimport {IonicModule} from '@ionic/angular';\n\nimport {LoginPage} from './login.page';\nimport {SharedModule} from '../../../../shared/shared.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {\n}\n","export default \".recordarme {\\n  position: absolute;\\n  padding: 11px 5px;\\n}\\n.recordarme span {\\n  padding: 10px;\\n  position: relative;\\n  top: -5px;\\n}\\n.bottom {\\n  position: absolute;\\n  width: 90%;\\n  bottom: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWlzY29udHJlcmFzL1ByaW1ldGVjL2Z4MTEvZngxMV9tb2JpbGUvc3JjL2FwcC9tb2R1bGVzL2F1dGgvcGFnZXMvbG9naW4vbG9naW4ucGFnZS5zY3NzIiwic3JjL2FwcC9tb2R1bGVzL2F1dGgvcGFnZXMvbG9naW4vbG9naW4ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQUE7RUFDQSxpQkFBQTtBQ0NGO0FEQ0U7RUFDRSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSxTQUFBO0FDQ0o7QURHQTtFQUNFLGtCQUFBO0VBQ0EsVUFBQTtFQUNBLFNBQUE7QUNBRiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvYXV0aC9wYWdlcy9sb2dpbi9sb2dpbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIucmVjb3JkYXJtZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgcGFkZGluZzogMTFweCA1cHg7XG5cbiAgc3BhbiB7XG4gICAgcGFkZGluZzogMTBweDtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgdG9wOiAtNXB4O1xuICB9XG59XG5cbi5ib3R0b20ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiA5MCU7XG4gIGJvdHRvbTogMDtcbn1cbiIsIi5yZWNvcmRhcm1lIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBwYWRkaW5nOiAxMXB4IDVweDtcbn1cbi5yZWNvcmRhcm1lIHNwYW4ge1xuICBwYWRkaW5nOiAxMHB4O1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHRvcDogLTVweDtcbn1cblxuLmJvdHRvbSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDkwJTtcbiAgYm90dG9tOiAwO1xufSJdfQ== */\"","import {Component, OnDestroy, OnInit} from '@angular/core';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {LoaderService} from '../../../../shared/services/loader/loader.service';\nimport {AuthService} from '../../../../shared/services/auth/auth.service';\nimport {NavigationEnd, Router} from '@angular/router';\nimport {ToastService} from '../../../../shared/services/toast/toast.service';\nimport {UserService} from '../../../../shared/services/user/user.service';\nimport {SyncService} from '../../../../shared/services/sync/sync.service';\nimport {HttpService} from '../../../../shared/services/http/http.service';\nimport {StoreService} from 'src/app/shared/services/store/store.service';\nimport {Subscription} from 'rxjs';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit, OnDestroy {\n\n  public loginForm: FormGroup;\n  public innerWidth: number;\n  public innerHeight: number;\n\n  private router$: Subscription;\n  private store$: Subscription;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private loaderService: LoaderService,\n    private authService: AuthService,\n    private router: Router,\n    private toastService: ToastService,\n    private syncService: SyncService,\n    private userService: UserService,\n    private httpService: HttpService,\n    private storeService: StoreService\n  ) {\n\n  }\n\n  ngOnInit() {\n    this.router$ = this.router.events.subscribe((e) => {\n      if (e instanceof NavigationEnd) {\n        this.checkRemember();\n      }\n    });\n\n    this.store$ = this.storeService.stateChanged.subscribe(data => {\n      this.checkRemember();\n    });\n\n    this.loginForm = this.formBuilder.group({\n      username: ['', [Validators.required]],\n      password: ['', Validators.required],\n      remember: [false]\n    });\n\n    this.innerWidth = window.innerWidth;\n    this.innerHeight = window.innerHeight;\n  }\n\n  ngOnDestroy(): void {\n    this.router$.unsubscribe();\n    this.store$.unsubscribe();\n  }\n\n  /**\n   * onSubmit\n   */\n  public onSubmit = async () => {\n    const data = Object.assign({}, this.loginForm.value);\n    data.username = data.username.toLowerCase();\n    const login = await this.login(data);\n\n    if (data.remember) {\n      this.storeService.setRemember(true);\n      this.storeService.setRememberData(data);\n    } else {\n      this.storeService.setRemember(false);\n      this.storeService.removeRememberData();\n    }\n\n    if (login && login.code === 1) {\n      this.addPin(login);\n    } else {\n      if (login !== null) {\n        this.storeService.setUser(login.user);\n        this.storeService.setUserConnections(login.connections);\n        this.storeService.setToken(login.token);\n        this.storeService.setLoginStatus(true);\n        this.makeLogin();\n      }\n    }\n  }\n\n  /**\n   * addPin\n   * @param login add PIN\n   */\n  public addPin = (login: any) => {\n    this.toastService.warningToast(login.message);\n    this.loginForm.reset();\n    this.storeService.setToken(login.token);\n    this.router.navigate(['auth/pin']);\n  }\n\n  /**\n   * @description hacer login si no tiene pin\n   */\n  public makeLogin = () => {\n    this.loginForm.reset();\n    this.router.navigate(['/home-page']);\n  }\n\n  /**\n   * filterKeys\n   * @param event\n   */\n  public filterKeys = (event: any) => {\n    const filter = '0123456789.-kK';\n\n    if (event.key) {\n      return filter.includes(event.key);\n    }\n\n    return false;\n  }\n\n  /**\n   * checkRemember\n   */\n  private checkRemember = () => {\n    if (this.storeService.getRemember()) {\n      const rememberData = this.storeService.getRememberData();\n\n      if (rememberData) {\n        this.loginForm.patchValue({\n          username: rememberData.username,\n          password: rememberData.password,\n          remember: [true]\n        });\n\n        this.loginForm.updateValueAndValidity();\n      }\n    }\n  }\n\n  /**\n   * loginEndpoint\n   * @param data LoginEndpoint\n   */\n  private login = (data: any): Promise<any> => {\n    this.loaderService.startLoader('Iniciando sesion...');\n\n    return new Promise((resolve) => {\n      this.authService.login(data).subscribe((success: any) => {\n\n        this.loaderService.stopLoader();\n        resolve(success);\n      }, error => {\n        this.loaderService.stopLoader();\n        const name = error.error.name;\n\n        if (name === 'ConnectionsNotFound') {\n          const token = error.error.data.token;\n          resolve({code: 1, token, user: data, message: error.error.message});\n        } else {\n          this.httpService.errorHandler(error);\n          resolve(null);\n        }\n      });\n    });\n  }\n\n}\n"],"sourceRoot":"webpack:///"}