{"version":3,"sources":["./src/app/modules/rem/rem-workers/rem-workers.page.html","./src/app/modules/rem/rem-workers/rem-workers.module.ts","./src/app/modules/rem/rem-workers/rem-workers.page.scss","./src/app/modules/rem/rem-workers/rem-workers.page.ts"],"names":[],"mappings":"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","file":"modules-rem-rem-workers-rem-workers-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar class=\\\"background-color-header\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button class=\\\"header-back-button\\\" text=\\\"\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>\\n      <strong>Trabajadores</strong>\\n    </ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <app-notifications></app-notifications>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-refresher (ionRefresh)=\\\"reload($event)\\\" class=\\\"refresher\\\" slot=\\\"fixed\\\">\\n    <ion-refresher-content\\n      pullingIcon=\\\"arrow-dropdown\\\"\\n      pullingText=\\\"Pull to refresh\\\"\\n      refreshingSpinner=\\\"circles\\\"\\n      refreshingText=\\\"Cargando...\\\">\\n    </ion-refresher-content>\\n  </ion-refresher>\\n\\n  <ng-container *ngIf=\\\"quadrille\\\">\\n    <h2 class=\\\"ion-text-center\\\">\\n      {{ quadrille.name }}\\n      <ion-badge class=\\\"quadrille-badge\\\" color=\\\"primary\\\">{{ filteredWorkers.length }}</ion-badge>\\n    </h2>\\n\\n    <ng-container *ngIf=\\\"filteredWorkers.length > 0\\\">\\n      <ion-list lines=\\\"none\\\">\\n        <ion-virtual-scroll [items]=\\\"filteredWorkers\\\">\\n          <ion-item (click)=\\\"markWorker(worker)\\\" *virtualItem=\\\"let worker\\\" [ngClass]=\\\"{ 'workerSelected': selectedWorkers.includes(worker) }\\\">\\n            <ion-icon name=\\\"contact\\\" slot=\\\"start\\\"></ion-icon>\\n            <ion-label>\\n              <h3 class=\\\"label-padding\\\">{{ worker.name }}</h3>\\n              <div class=\\\"label-padding\\\">\\n\\n                <div class=\\\"ion-text-left\\\">\\n                  {{ worker.identifier | rut }}\\n                </div>\\n                <div class=\\\"ion-text-right\\\">\\n                  <ng-container *ngIf=\\\"worker.quadrilleToApprove > 0\\\">\\n                    <ion-badge *ngIf=\\\"worker.quadrilleStatus === 'POR APROBAR' && worker.quadrille === quadrille.id\\\" color=\\\"warning\\\">\\n                      Traspasando\\n                    </ion-badge>\\n                    <ion-badge *ngIf=\\\"worker.quadrilleStatus === 'POR APROBAR' && worker.quadrille !== quadrille.id\\\" color=\\\"warning\\\">\\n                      Por Aprobar\\n                    </ion-badge>\\n                  </ng-container>\\n                  <ng-container *ngIf=\\\"worker.quadrilleToApprove === 0\\\">\\n                    <ion-badge color=\\\"danger\\\">{{ worker.quadrilleStatus | uppercase }}</ion-badge>\\n                  </ng-container>\\n                </div>\\n              </div>\\n            </ion-label>\\n          </ion-item>\\n        </ion-virtual-scroll>\\n      </ion-list>\\n    </ng-container>\\n  </ng-container>\\n\\n</ion-content>\\n\\n<ion-footer>\\n  <ng-container *ngIf=\\\"selectedWorkers.length > 0\\\">\\n    <ion-row>\\n      <ng-container *ngIf=\\\"selectedWorkers[0].quadrilleToApprove === 0\\\">\\n        <ion-col>\\n          <ng-container *ngIf=\\\"selectedWorkers[0].quadrilleStatus === ''\\\">\\n            <ion-button (click)=\\\"selectQuadrille();\\\" color=\\\"warning\\\" expand=\\\"block\\\">\\n              Traspasar {{ selectedWorkers.length }}\\n            </ion-button>\\n          </ng-container>\\n          <ng-container *ngIf=\\\"selectedWorkers[0].quadrilleStatus === 'rechazado'\\\">\\n            <ion-button (click)=\\\"acceptRejectWorkers()\\\" color=\\\"success\\\" expand=\\\"block\\\">\\n              Aprobar {{ selectedWorkers.length }}\\n            </ion-button>\\n          </ng-container>\\n        </ion-col>\\n      </ng-container>\\n\\n      <ng-container *ngIf=\\\"selectedWorkers[0].quadrilleToApprove > 0\\\">\\n        <ion-col>\\n          <ion-button (click)=\\\"acceptWorkers();\\\" color=\\\"success\\\" expand=\\\"block\\\">\\n            Aprobar {{ selectedWorkers.length }}\\n          </ion-button>\\n        </ion-col>\\n        <ion-col>\\n          <ion-button (click)=\\\"rejectWorkers();\\\" color=\\\"danger\\\" expand=\\\"block\\\">\\n            Rechazar {{ selectedWorkers.length }}\\n          </ion-button>\\n        </ion-col>\\n      </ng-container>\\n    </ion-row>\\n  </ng-container>\\n</ion-footer>\\n\"","import {NgModule} from '@angular/core';\nimport {RouterModule, Routes} from '@angular/router';\nimport {RemWorkersPage} from './rem-workers.page';\nimport {SharedModule} from '../../../shared/shared.module';\nimport {QuadrilleService} from '../rem-quadrille/services/quadrille/quadrille.service';\n\nconst routes: Routes = [\n  {\n    path: ':id',\n    component: RemWorkersPage\n  }\n];\n\n@NgModule({\n  imports: [\n    SharedModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [RemWorkersPage],\n  providers: [\n    QuadrilleService\n  ]\n})\nexport class RemWorkersPageModule {\n\n}\n","export default \"ion-menu-button {\\n  --color: white;\\n}\\n\\nion-title {\\n  color: white;\\n}\\n\\n.label-padding {\\n  padding-top: 8px;\\n  font-size: 18px;\\n}\\n\\n.quadrille-badge {\\n  --padding-top: 5px;\\n  font-size: 1em;\\n}\\n\\n.workerSelected {\\n  --background: var(--ion-color-medium);\\n  --color: var(--ion-color-light);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWlzY29udHJlcmFzL1ByaW1ldGVjL2Z4MTEvZngxMV9tb2JpbGUvc3JjL2FwcC9tb2R1bGVzL3JlbS9yZW0td29ya2Vycy9yZW0td29ya2Vycy5wYWdlLnNjc3MiLCJzcmMvYXBwL21vZHVsZXMvcmVtL3JlbS13b3JrZXJzL3JlbS13b3JrZXJzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGNBQUE7QUNDRjs7QURFQTtFQUNFLFlBQUE7QUNDRjs7QURFQTtFQUNFLGdCQUFBO0VBQ0EsZUFBQTtBQ0NGOztBREVBO0VBQ0Usa0JBQUE7RUFDQSxjQUFBO0FDQ0Y7O0FERUE7RUFDRSxxQ0FBQTtFQUNBLCtCQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9tb2R1bGVzL3JlbS9yZW0td29ya2Vycy9yZW0td29ya2Vycy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tbWVudS1idXR0b24ge1xuICAtLWNvbG9yOiB3aGl0ZTtcbn1cblxuaW9uLXRpdGxlIHtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4ubGFiZWwtcGFkZGluZyB7XG4gIHBhZGRpbmctdG9wOiA4cHg7XG4gIGZvbnQtc2l6ZTogMThweDtcbn1cblxuLnF1YWRyaWxsZS1iYWRnZSB7XG4gIC0tcGFkZGluZy10b3A6IDVweDtcbiAgZm9udC1zaXplOiAxZW07XG59XG5cbi53b3JrZXJTZWxlY3RlZCB7XG4gIC0tYmFja2dyb3VuZDogdmFyKC0taW9uLWNvbG9yLW1lZGl1bSk7XG4gIC0tY29sb3I6IHZhcigtLWlvbi1jb2xvci1saWdodCk7XG59XG4iLCJpb24tbWVudS1idXR0b24ge1xuICAtLWNvbG9yOiB3aGl0ZTtcbn1cblxuaW9uLXRpdGxlIHtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4ubGFiZWwtcGFkZGluZyB7XG4gIHBhZGRpbmctdG9wOiA4cHg7XG4gIGZvbnQtc2l6ZTogMThweDtcbn1cblxuLnF1YWRyaWxsZS1iYWRnZSB7XG4gIC0tcGFkZGluZy10b3A6IDVweDtcbiAgZm9udC1zaXplOiAxZW07XG59XG5cbi53b3JrZXJTZWxlY3RlZCB7XG4gIC0tYmFja2dyb3VuZDogdmFyKC0taW9uLWNvbG9yLW1lZGl1bSk7XG4gIC0tY29sb3I6IHZhcigtLWlvbi1jb2xvci1saWdodCk7XG59Il19 */\"","import {Component, OnDestroy, OnInit} from '@angular/core';\nimport {SyncService} from '../../../shared/services/sync/sync.service';\nimport {ActivatedRoute} from '@angular/router';\nimport {LoaderService} from '../../../shared/services/loader/loader.service';\nimport {ActionSheetController} from '@ionic/angular';\nimport {QuadrilleService} from '../rem-quadrille/services/quadrille/quadrille.service';\nimport {UserService} from '../../../shared/services/user/user.service';\nimport {HttpService} from '../../../shared/services/http/http.service';\nimport {StoreService} from '../../../shared/services/store/store.service';\nimport {Subscription} from 'rxjs';\n\nenum WorkerStatus {\n  'POR APROBAR' = 'por aprobar',\n  'APROBADO' = 'aprobado',\n  'RECHAZADO' = 'rechazado',\n  'APRUEBA RECHAZO' = 'apruebarechazo'\n}\n\n@Component({\n  selector: 'app-rem-workers',\n  templateUrl: './rem-workers.page.html',\n  styleUrls: ['./rem-workers.page.scss'],\n})\nexport class RemWorkersPage implements OnInit, OnDestroy {\n\n  public filteredWorkers: Array<any> = [];\n  public quadrille: any;\n  public selectedWorkers: Array<any> = [];\n  private workers: Array<any> = [];\n  private quadrilles: Array<any> = [];\n  private buttons: Array<any> = [];\n  private userData = null;\n\n  private store$: Subscription;\n\n  constructor(\n    private syncService: SyncService,\n    private route: ActivatedRoute,\n    private loaderService: LoaderService,\n    private actionSheetController: ActionSheetController,\n    private quadrilleService: QuadrilleService,\n    private userService: UserService,\n    private httpService: HttpService,\n    private storeService: StoreService\n  ) {\n\n  }\n\n  ngOnInit() {\n    const id = this.route.snapshot.paramMap.get('id');\n\n    this.store$ = this.storeService.stateChanged.subscribe(data => {\n      this.userData = this.storeService.getUser();\n      this.loadWorkers(id);\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.store$.unsubscribe();\n  }\n\n  /**\n   * reload\n   * @param event\n   */\n  public reload = (event) => {\n    const id = this.route.snapshot.paramMap.get('id');\n    this.loadWorkers(id);\n    event.target.complete();\n  }\n\n  /**\n   * markWorker\n   * @param worker\n   */\n  public markWorker = (worker: any) => {\n    if (this.selectedWorkers.includes(worker)) {\n      const index = this.selectedWorkers.indexOf(worker);\n      this.selectedWorkers.splice(index, 1);\n    } else {\n      if (this.selectedWorkers.length > 0) {\n        this.selectedWorkers = this.selectedWorkers.filter(item => item.quadrilleStatus === worker.quadrilleStatus);\n      }\n\n      this.selectedWorkers.push(worker);\n    }\n  }\n\n  /**\n   * selectQuadrille\n   */\n  public selectQuadrille = async () => {\n    const actionSheet = await this.actionSheetController.create({\n      header: 'Cuadrillas',\n      buttons: [\n        ...this.buttons,\n        {\n          text: 'Cancelar',\n          icon: 'close',\n          role: 'cancel',\n          handler: () => {\n            this.selectedWorkers = [];\n          }\n        }]\n    });\n\n    await actionSheet.present();\n  }\n\n  /**\n   * acceptWorkers\n   */\n  public acceptWorkers = () => {\n    this.transferWorkers(this.quadrille.id, WorkerStatus.APROBADO);\n  }\n\n  /**\n   * rejectWorkers\n   */\n  public rejectWorkers = () => {\n    this.transferWorkers(this.quadrille.id, WorkerStatus.RECHAZADO);\n  }\n\n  /**\n   * acceptRejectWorkers\n   */\n  public acceptRejectWorkers = () => {\n    this.transferWorkers(this.quadrille.id, WorkerStatus['APRUEBA RECHAZO']);\n  }\n\n  /**\n   * loadWorkers\n   */\n  private loadWorkers = (id: string) => {\n    this.loaderService.startLoader();\n    const quadrilles = this.storeService.getQuadrilles();\n    const allWorkers = this.storeService.getWorkers();\n\n    if (quadrilles && allWorkers) {\n      this.quadrilles = [...quadrilles];\n      this.quadrille = quadrilles.find(item => item.id === +id);\n      const workers = allWorkers.filter(item => item.quadrille === this.quadrille.id || item.quadrilleToApprove === this.quadrille.id);\n      this.workers = [...workers];\n      this.filteredWorkers = [...workers];\n\n      this.buildButtons();\n    }\n\n    this.loaderService.stopLoader();\n  }\n\n  /**\n   * buildButtons\n   */\n  private buildButtons = () => {\n    this.buttons = this.quadrilles\n      .filter(item => item !== this.quadrille)\n      .map(item => ({\n        text: item.name,\n        icon: 'people',\n        handler: () => {\n          this.transferWorkers(item.id, WorkerStatus['POR APROBAR']);\n        }\n      }));\n  }\n\n  /**\n   * transferWorkers\n   */\n  private transferWorkers = (quadrille: number, status: string) => {\n    const data = {\n      quadrille,\n      workers: this.selectedWorkers,\n      status\n    };\n\n    this.loaderService.startLoader();\n\n    this.quadrilleService.transferWorkers(data).subscribe(success => {\n      this.loaderService.stopLoader();\n      this.selectedWorkers = [];\n      this.reSync();\n    }, error => {\n      this.loaderService.stopLoader();\n      this.httpService.errorHandler(error);\n    });\n  }\n\n  /**\n   * reSync\n   */\n  private reSync = () => {\n    this.loaderService.startLoader();\n    const id = this.route.snapshot.paramMap.get('id');\n    this.syncData();\n    // this.loadWorkers(id);\n    this.loaderService.stopLoader();\n  }\n\n  /**\n   * syncData\n   * @param username\n   */\n  private syncData = () => {\n    const username = this.userData.username;\n    const activeConnection = this.storeService.getActiveConnection();\n\n    this.syncService.syncData(username, activeConnection.superuser ? 1 : 0).subscribe((success: any) => {\n      this.storeService.setSyncedData(success.data);\n    }, async error => {\n      this.httpService.errorHandler(error);\n    });\n  }\n}\n"],"sourceRoot":"webpack:///"}