{"version":3,"sources":["src/app/home-page/rem/rem-workers/rem-workers.page.html","src/app/home-page/rem/rem-workers/rem-workers.module.ts","src/app/home-page/rem/rem-workers/rem-workers.page.scss","src/app/home-page/rem/rem-workers/rem-workers.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar class=\\\"background-color-header\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button class=\\\"header-back-button\\\" text=\\\"\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>\\n      <strong>Trabajadores</strong>\\n    </ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <app-notifications></app-notifications>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-refresher (ionRefresh)=\\\"reload($event)\\\" class=\\\"refresher\\\" slot=\\\"fixed\\\">\\n    <ion-refresher-content\\n      pullingIcon=\\\"arrow-dropdown\\\"\\n      pullingText=\\\"Pull to refresh\\\"\\n      refreshingSpinner=\\\"circles\\\"\\n      refreshingText=\\\"Cargando...\\\">\\n    </ion-refresher-content>\\n  </ion-refresher>\\n\\n  <ng-container *ngIf=\\\"quadrille\\\">\\n    <h2 class=\\\"ion-text-center\\\">\\n      {{ quadrille.name }}\\n      <ion-badge class=\\\"quadrille-badge\\\" color=\\\"primary\\\">{{ filteredWorkers.length }}</ion-badge>\\n    </h2>\\n\\n    <ng-container *ngIf=\\\"filteredWorkers.length > 0\\\">\\n      <ion-list lines=\\\"none\\\">\\n        <ion-virtual-scroll [items]=\\\"filteredWorkers\\\">\\n          <ion-item (click)=\\\"markWorker(worker)\\\" *virtualItem=\\\"let worker\\\" [ngClass]=\\\"{ 'workerSelected': selectedWorkers.includes(worker) }\\\">\\n            <ion-icon name=\\\"contact\\\" slot=\\\"start\\\"></ion-icon>\\n            <ion-label>\\n              <h3 class=\\\"label-padding\\\">{{ worker.name }}</h3>\\n              <div class=\\\"label-padding\\\">\\n\\n                <div class=\\\"ion-text-left\\\">\\n                  {{ worker.identifier | rut }}\\n                </div>\\n                <div class=\\\"ion-text-right\\\">\\n                  <ng-container *ngIf=\\\"worker.quadrilleToApprove > 0\\\">\\n                    <ion-badge *ngIf=\\\"worker.quadrilleStatus === 'POR APROBAR' && worker.quadrille === quadrille.id\\\" color=\\\"warning\\\">\\n                      Traspasando\\n                    </ion-badge>\\n                    <ion-badge *ngIf=\\\"worker.quadrilleStatus === 'POR APROBAR' && worker.quadrille !== quadrille.id\\\" color=\\\"warning\\\">\\n                      Por Aprobar\\n                    </ion-badge>\\n                  </ng-container>\\n                  <ng-container *ngIf=\\\"worker.quadrilleToApprove === 0\\\">\\n                    <ion-badge color=\\\"danger\\\">{{ worker.quadrilleStatus | uppercase }}</ion-badge>\\n                  </ng-container>\\n                </div>\\n              </div>\\n            </ion-label>\\n          </ion-item>\\n        </ion-virtual-scroll>\\n      </ion-list>\\n    </ng-container>\\n  </ng-container>\\n\\n</ion-content>\\n\\n<ion-footer>\\n  <ng-container *ngIf=\\\"selectedWorkers.length > 0\\\">\\n    <ion-row>\\n      <ng-container *ngIf=\\\"selectedWorkers[0].quadrilleToApprove === 0\\\">\\n        <ion-col>\\n          <ng-container *ngIf=\\\"selectedWorkers[0].quadrilleStatus === ''\\\">\\n            <ion-button (click)=\\\"selectQuadrille();\\\" color=\\\"warning\\\" expand=\\\"block\\\">\\n              Traspasar {{ selectedWorkers.length }}\\n            </ion-button>\\n          </ng-container>\\n          <ng-container *ngIf=\\\"selectedWorkers[0].quadrilleStatus === 'rechazado'\\\">\\n            <ion-button (click)=\\\"acceptRejectWorkers()\\\" color=\\\"success\\\" expand=\\\"block\\\">\\n              Aprobar {{ selectedWorkers.length }}\\n            </ion-button>\\n          </ng-container>\\n        </ion-col>\\n      </ng-container>\\n\\n      <ng-container *ngIf=\\\"selectedWorkers[0].quadrilleToApprove > 0\\\">\\n        <ion-col>\\n          <ion-button (click)=\\\"acceptWorkers();\\\" color=\\\"success\\\" expand=\\\"block\\\">\\n            Aprobar {{ selectedWorkers.length }}\\n          </ion-button>\\n        </ion-col>\\n        <ion-col>\\n          <ion-button (click)=\\\"rejectWorkers();\\\" color=\\\"danger\\\" expand=\\\"block\\\">\\n            Rechazar {{ selectedWorkers.length }}\\n          </ion-button>\\n        </ion-col>\\n      </ng-container>\\n    </ion-row>\\n  </ng-container>\\n</ion-footer>\\n\"","import {NgModule} from '@angular/core';\nimport {RouterModule, Routes} from '@angular/router';\nimport {RemWorkersPage} from './rem-workers.page';\nimport {SharedModule} from '../../../shared/shared.module';\nimport {QuadrilleService} from '../rem-quadrille/services/quadrille/quadrille.service';\n\nconst routes: Routes = [\n  {\n    path: ':id',\n    component: RemWorkersPage\n  }\n];\n\n@NgModule({\n  imports: [\n    SharedModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [RemWorkersPage],\n  providers: [\n    QuadrilleService\n  ]\n})\nexport class RemWorkersPageModule {\n\n}\n","export default \"ion-menu-button {\\n  --color: white;\\n}\\n\\nion-title {\\n  color: white;\\n}\\n\\n.label-padding {\\n  padding-top: 8px;\\n  font-size: 18px;\\n}\\n\\n.quadrille-badge {\\n  --padding-top: 5px;\\n  font-size: 1em;\\n}\\n\\n.workerSelected {\\n  --background: var(--ion-color-medium);\\n  --color: var(--ion-color-light);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWlzY29udHJlcmFzL1ByaW1ldGVjL2Z4MTEvZngxMV9tb2JpbGUvc3JjL2FwcC9ob21lLXBhZ2UvcmVtL3JlbS13b3JrZXJzL3JlbS13b3JrZXJzLnBhZ2Uuc2NzcyIsInNyYy9hcHAvaG9tZS1wYWdlL3JlbS9yZW0td29ya2Vycy9yZW0td29ya2Vycy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFBO0FDQ0Y7O0FERUE7RUFDRSxZQUFBO0FDQ0Y7O0FERUE7RUFDRSxnQkFBQTtFQUNBLGVBQUE7QUNDRjs7QURFQTtFQUNFLGtCQUFBO0VBQ0EsY0FBQTtBQ0NGOztBREVBO0VBQ0UscUNBQUE7RUFDQSwrQkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvaG9tZS1wYWdlL3JlbS9yZW0td29ya2Vycy9yZW0td29ya2Vycy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tbWVudS1idXR0b24ge1xuICAtLWNvbG9yOiB3aGl0ZTtcbn1cblxuaW9uLXRpdGxlIHtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4ubGFiZWwtcGFkZGluZyB7XG4gIHBhZGRpbmctdG9wOiA4cHg7XG4gIGZvbnQtc2l6ZTogMThweDtcbn1cblxuLnF1YWRyaWxsZS1iYWRnZSB7XG4gIC0tcGFkZGluZy10b3A6IDVweDtcbiAgZm9udC1zaXplOiAxZW07XG59XG5cbi53b3JrZXJTZWxlY3RlZCB7XG4gIC0tYmFja2dyb3VuZDogdmFyKC0taW9uLWNvbG9yLW1lZGl1bSk7XG4gIC0tY29sb3I6IHZhcigtLWlvbi1jb2xvci1saWdodCk7XG59XG4iLCJpb24tbWVudS1idXR0b24ge1xuICAtLWNvbG9yOiB3aGl0ZTtcbn1cblxuaW9uLXRpdGxlIHtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4ubGFiZWwtcGFkZGluZyB7XG4gIHBhZGRpbmctdG9wOiA4cHg7XG4gIGZvbnQtc2l6ZTogMThweDtcbn1cblxuLnF1YWRyaWxsZS1iYWRnZSB7XG4gIC0tcGFkZGluZy10b3A6IDVweDtcbiAgZm9udC1zaXplOiAxZW07XG59XG5cbi53b3JrZXJTZWxlY3RlZCB7XG4gIC0tYmFja2dyb3VuZDogdmFyKC0taW9uLWNvbG9yLW1lZGl1bSk7XG4gIC0tY29sb3I6IHZhcigtLWlvbi1jb2xvci1saWdodCk7XG59Il19 */\"","import {Component, OnDestroy, OnInit} from '@angular/core';\nimport {SyncService} from '../../../shared/services/sync/sync.service';\nimport {ActivatedRoute} from '@angular/router';\nimport {LoaderService} from '../../../shared/services/loader/loader.service';\nimport {ActionSheetController} from '@ionic/angular';\nimport {QuadrilleService} from '../rem-quadrille/services/quadrille/quadrille.service';\nimport {UserService} from '../../../shared/services/user/user.service';\nimport {HttpService} from '../../../shared/services/http/http.service';\nimport {StoreService} from '../../../shared/services/store/store.service';\nimport {Subscription} from 'rxjs';\n\nenum WorkerStatus {\n  'POR APROBAR' = 'por aprobar',\n  'APROBADO' = 'aprobado',\n  'RECHAZADO' = 'rechazado',\n  'APRUEBA RECHAZO' = 'apruebarechazo'\n}\n\n@Component({\n  selector: 'app-rem-workers',\n  templateUrl: './rem-workers.page.html',\n  styleUrls: ['./rem-workers.page.scss'],\n})\nexport class RemWorkersPage implements OnInit, OnDestroy {\n\n  public filteredWorkers: Array<any> = [];\n  public quadrille: any;\n  public selectedWorkers: Array<any> = [];\n  private workers: Array<any> = [];\n  private quadrilles: Array<any> = [];\n  private buttons: Array<any> = [];\n  private userData = null;\n\n  private store$: Subscription;\n\n  constructor(\n    private syncService: SyncService,\n    private route: ActivatedRoute,\n    private loaderService: LoaderService,\n    private actionSheetController: ActionSheetController,\n    private quadrilleService: QuadrilleService,\n    private userService: UserService,\n    private httpService: HttpService,\n    private storeService: StoreService\n  ) {\n\n  }\n\n  ngOnInit() {\n    const id = this.route.snapshot.paramMap.get('id');\n\n    this.store$ = this.storeService.stateChanged.subscribe(data => {\n      this.userData = this.storeService.getUser();\n      this.loadWorkers(id);\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.store$.unsubscribe();\n  }\n\n  /**\n   * reload\n   * @param event\n   */\n  public reload = (event) => {\n    const id = this.route.snapshot.paramMap.get('id');\n    this.loadWorkers(id);\n    event.target.complete();\n  }\n\n  /**\n   * markWorker\n   * @param worker\n   */\n  public markWorker = (worker: any) => {\n    if (this.selectedWorkers.includes(worker)) {\n      const index = this.selectedWorkers.indexOf(worker);\n      this.selectedWorkers.splice(index, 1);\n    } else {\n      if (this.selectedWorkers.length > 0) {\n        this.selectedWorkers = this.selectedWorkers.filter(item => item.quadrilleStatus === worker.quadrilleStatus);\n      }\n\n      this.selectedWorkers.push(worker);\n    }\n  }\n\n  /**\n   * selectQuadrille\n   */\n  public selectQuadrille = async () => {\n    const actionSheet = await this.actionSheetController.create({\n      header: 'Cuadrillas',\n      buttons: [\n        ...this.buttons,\n        {\n          text: 'Cancelar',\n          icon: 'close',\n          role: 'cancel',\n          handler: () => {\n            this.selectedWorkers = [];\n          }\n        }]\n    });\n\n    await actionSheet.present();\n  }\n\n  /**\n   * acceptWorkers\n   */\n  public acceptWorkers = () => {\n    this.transferWorkers(this.quadrille.id, WorkerStatus.APROBADO);\n  }\n\n  /**\n   * rejectWorkers\n   */\n  public rejectWorkers = () => {\n    this.transferWorkers(this.quadrille.id, WorkerStatus.RECHAZADO);\n  }\n\n  /**\n   * acceptRejectWorkers\n   */\n  public acceptRejectWorkers = () => {\n    this.transferWorkers(this.quadrille.id, WorkerStatus['APRUEBA RECHAZO']);\n  }\n\n  /**\n   * loadWorkers\n   */\n  private loadWorkers = (id: string) => {\n    this.loaderService.startLoader();\n    const quadrilles = this.storeService.getQuadrilles();\n    const allWorkers = this.storeService.getWorkers();\n\n    if (quadrilles && allWorkers) {\n      this.quadrilles = [...quadrilles];\n      this.quadrille = quadrilles.find(item => item.id === +id);\n      const workers = allWorkers.filter(item => item.quadrille === this.quadrille.id || item.quadrilleToApprove === this.quadrille.id);\n      this.workers = [...workers];\n      this.filteredWorkers = [...workers];\n\n      this.buildButtons();\n    }\n\n    this.loaderService.stopLoader();\n  }\n\n  /**\n   * buildButtons\n   */\n  private buildButtons = () => {\n    this.buttons = this.quadrilles\n      .filter(item => item !== this.quadrille)\n      .map(item => ({\n        text: item.name,\n        icon: 'people',\n        handler: () => {\n          this.transferWorkers(item.id, WorkerStatus['POR APROBAR']);\n        }\n      }));\n  }\n\n  /**\n   * transferWorkers\n   */\n  private transferWorkers = (quadrille: number, status: string) => {\n    const data = {\n      quadrille,\n      workers: this.selectedWorkers,\n      status\n    };\n\n    this.loaderService.startLoader();\n\n    this.quadrilleService.transferWorkers(data).subscribe(success => {\n      this.loaderService.stopLoader();\n      this.selectedWorkers = [];\n      this.reSync();\n    }, error => {\n      this.loaderService.stopLoader();\n      this.httpService.errorHandler(error);\n    });\n  }\n\n  /**\n   * reSync\n   */\n  private reSync = () => {\n    this.loaderService.startLoader();\n    const id = this.route.snapshot.paramMap.get('id');\n    this.syncData();\n    // this.loadWorkers(id);\n    this.loaderService.stopLoader();\n  }\n\n  /**\n   * syncData\n   * @param username\n   */\n  private syncData = () => {\n    const username = this.userData.username;\n    const activeConnection = this.storeService.getActiveConnection();\n\n    this.syncService.syncData(username, activeConnection.superuser ? 1 : 0).subscribe((success: any) => {\n      this.storeService.setSyncedData(success.data);\n    }, async error => {\n      this.httpService.errorHandler(error);\n    });\n  }\n}\n"],"sourceRoot":"webpack:///","file":"rem-rem-workers-rem-workers-module-es5.js"}